
<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<body>

<div ng-app="myApp" ng-controller="myCtrl" id="myCtrlID">	
<table border="0">
<tr>
<td>
	<table border="0">
	<tr>
		<td>
			<table>
			<tr>
				<td><h2 style="background-color:{{colour1.P1}}">{{player1ID}}</h2></td>
			</tr>
			
			</table>
		</td>
		<td>
			<table border="1" style="border-collapse:collapse;background-color:white">
			<tr>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" ng-disabled="disable.out[4]" value="4" style="background-color:{{colour1.out[4]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[4,0])"/></td>
				<td width="25" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" ng-disabled="disable.out[5]" value="5" style="background-color:{{colour1.out[5]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[5,0])"/></td>
				<td width="50" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" ng-disabled="disable.out[6]" value="6" style="background-color:{{colour1.out[6]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[6,0])"/></td>
				<td width="50" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" ng-disabled="disable.out[7]" value="7" style="background-color:{{colour1.out[7]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[7,0])"/></td>
				<td width="50" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" ng-disabled="disable.out[8]" value="8" style="background-color:{{colour1.out[8]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[8,0])"/></td>
				<td width="50" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" ng-disabled="disable.out[9]" value="9" style="background-color:{{colour1.out[9]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[9,0])"/></td>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" ng-disabled="disable.out[10]" value="10" style="background-color:{{colour1.out[10]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[10,0])"/></td>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" ng-disabled="disable.out[11]" value="11" style="background-color:{{colour1.out[11]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[11,0])"/></td>

			</tr>
			<tr>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="3" ng-disabled="disable.out[3]" style="background-color:{{colour1.out[3]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[3,0])"/></td>
				<td width="25" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:3px solid;border-right:4px solid Khaki;border-bottom:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[0][0]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[0,0])" ng-disabled="disable.square[0][0]" value="H1"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-left:4px solid Khaki;border-top:3px solid;border-bottom:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[0][1]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[0,1])" ng-disabled="disable.square[0][1]" value="H2"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-top:3px solid;border-bottom:4px solid Khaki;border-right:4px solid Khaki;">
	<input type="button" style="background-color:{{colour1.square[0][2]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[0,2])" ng-disabled="disable.square[0][2]" value="H3"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:3px solid;border-bottom:4px solid Khaki;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[0][3]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[0,3])" ng-disabled="disable.square[0][3]" value="H4"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-top:3px solid;border-bottom:4px solid Khaki;border-right:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[0][4]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[0,4])" ng-disabled="disable.square[0][4]" value="H5"></td>
				<td width="25" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:3px solid;border-left:4px solid Khaki;border-right:3px solid;border-bottom:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[0][5]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[0,5])" ng-disabled="disable.square[0][5]" value="H6"></td>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="12" ng-disabled="disable.out[12]" style="background-color:{{colour1.out[12]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[12,0])"/></td>
			</tr>
			<tr>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="2" ng-disabled="disable.out[2]" style="background-color:{{colour1.out[2]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[2,0])"/></td>
				<td width="25" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:4px solid Khaki;border-right: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[1][0]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[1,0])" ng-disabled="disable.square[1][0]" value="G1"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:4px solid Khaki;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[1][1]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[1,1])" ng-disabled="disable.square[1][1]" value="G2"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-top:4px solid Khaki;border-right:4px solid Khaki;">
	<input type="button" style="background-color:{{colour1.square[1][2]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[1,2])" ng-disabled="disable.square[1][2]" value="G3"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:4px solid Khaki;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[1][3]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[1,3])" ng-disabled="disable.square[1][3]" value="G4"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-top:4px solid Khaki;border-right:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[1][4]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[1,4])" ng-disabled="disable.square[1][4]" value="G5"></td>
				<td width="25" height="60" style="background-color:BurlyWood;border-left:4px solid Khaki;border-top:4px solid Khaki;border-right:3px solid">
	<input type="button" style="background-color:{{colour1.square[1][5]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[1,5])" ng-disabled="disable.square[1][5]" value="G6"></td>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="13" ng-disabled="disable.out[13]" style="background-color:{{colour1.out[13]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[13,0])"/></td>
			</tr>
			<!--<tr>
				<td width="50" height="60" style="border-left:3px solid;border-top:0px solid">
	<input type="button" style="background-color:{{colour1.square[2][0]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[2,0])" value="G1"></td>
				<td width="50" height="60" style="border-left:3px solid;border-top:0px solid">
	<input type="button" style="background-color:{{colour1.square[2][1]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[2,1])" value="G2"></td>
				<td width="50" height="60" >
	<input type="button" style="background-color:{{colour1.square[2][2]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[2,2])" value="G3"></td>
				<td width="50" height="60" style="border-left:3px solid;border-top:0px solid">
	<input type="button" style="background-color:{{colour1.square[2][3]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[2,3])" value="G4"></td>
				<td width="50" height="60" >
	<input type="button" style="background-color:{{colour1.square[2][4]}};width:100%;height:100%" onmousedown="myFunction(event,[2,4])" value="G5"></td>
				<td width="25" height="60" style="border-left:3px solid;border-top:0px solid;border-right:3px solid">
	<input type="button" style="background-color:{{colour1.square[2][5]}};width:100%;height:100%" onmousedown="myFunction(event,[2,5])" value="G6"></td>
			</tr>-->
			<tr>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="1" ng-disabled="disable.out[1]" style="background-color:{{colour1.out[1]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[1,0])"/></td>
				<td width="25" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:0px solid;border-right:4px solid Khaki;border-bottom:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[2][0]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[2,0])" ng-disabled="disable.square[2][0]" value="F1"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:0px solid;border-left: 4px solid Khaki;border-bottom:4px solid Khaki">
	<input type="button"style="background-color:{{colour1.square[2][1]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[2,1])" ng-disabled="disable.square[2][1]" value="F2"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-top:0px solid;border-right:4px solid Khaki;border-bottom:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[2][2]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[2,2])" ng-disabled="disable.square[2][2]" value="F3"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:0px solid;border-bottom:4px solid Khaki;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[2][3]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[2,3])" ng-disabled="disable.square[2][3]" value="F4"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-bottom:4px solid Khaki;border-right:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[2][4]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[2,4])" ng-disabled="disable.square[2][4]" value="F5"></td>
				<td width="25" height="60" style="background-color:BurlyWood;border-left:4px solid Khaki;border-top:0px solid;border-right:3px solid;border-bottom:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[2][5]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[2,5])" ng-disabled="disable.square[2][5]" value="F6"></td>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="14" ng-disabled="disable.out[14]" style="background-color:{{colour1.out[14]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[14,0])"/></td>

			</tr>
			<tr>
				<td width="40" height="80" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="0" ng-disabled="disable.out[0]" style="background-color:{{colour1.out[0]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[0,0])"/></td>
				<td width="25" height="80" style="background-color:BurlyWood;border-left:3px solid;border-top:4px solid Khaki;border-bottom:3px dashed;border-right:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[3][0]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[3,0])" ng-disabled="disable.square[3][0]" value="E1"></td>
				<td width="50" height="80" style="background-color:BurlyWood;border-left:3px solid;border-top:4px solid Khaki;border-bottom:3px dashed;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[3][1]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[3,1])" ng-disabled="disable.square[3][1]" value="E2"></td>
				<td width="50" height="80" style="background-color:BurlyWood;border-top:4px solid Khaki;border-right:0px solid Khaki;border-bottom:3px dashed">
	<input type="button" style="background-color:{{colour1.square[3][2]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[3,2])" ng-disabled="disable.square[3][2]" value="E3"></td>
				<td width="50" height="80" style="background-color:BurlyWood;border-top:4px solid Khaki;border-bottom:3px dashed;border-left:0px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[3][3]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[3,3])" ng-disabled="disable.square[3][3]" value="E4"></td>
				<td width="50" height="80" style="background-color:BurlyWood;border-top:4px solid Khaki;border-bottom:3px dashed;border-right:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[3][4]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[3,4])" ng-disabled="disable.square[3][4]" value="E5"></td>
				<td width="25" height="80" style="background-color:BurlyWood;border-left:4px solid Khaki;border-top:4px solid Khaki;border-right:3px solid;border-bottom:3px dashed">
	<input type="button" style="background-color:{{colour1.square[3][5]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[3,5])" ng-disabled="disable.square[3][5]" value="E6"></td>
				<td width="40" height="80" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="15" ng-disabled="disable.out[15]" style="background-color:{{colour1.out[15]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[15,0])"/></td>

			</tr>
			</table>
		</td>
		<td>
			<table>
			<tr>
				<td><h2 style="background-color:{{colour1.P1}}">Points: {{point[0]}}<h2></td>
			</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>REFEREE</td>
		<td>
			<input type="button" onmousedown="myFunction(event,'net',[0,0])" style="background-color:{{colour1.net}}" ng-disabled="disable.net" value="                                            NET                                         "/>
		</td>
	</tr>
	<tr>
		<td>
			<table>
			<tr>
				<td><h2 style="background-color:{{colour1.P2}}">{{player2ID}}<h2></td>
			</tr>
			</table>
		</td>
		<td>
			<table border="1" style="border-collapse:collapse;background-color:white">
			<tr>
				<td width="40" height="80" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="31" ng-disabled="disable.out[31]" style="background-color:{{colour1.out[31]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[31,0])"/></td>
				<td width="25" height="80" style="background-color:BurlyWood;border-left:3px solid;border-bottom:4px solid Khaki;border-top:3px dashed;border-right:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[4][0]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[4,0])" ng-disabled="disable.square[4][0]" value="D1"></td>
				<td width="50" height="80" style="background-color:BurlyWood;border-left:3px solid;border-bottom:4px solid Khaki;border-top:3px dashed;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[4][1]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[4,1])" ng-disabled="disable.square[4][1]" value="D2"></td>
				<td width="50" height="80" style="background-color:BurlyWood;border-bottom:4px solid Khaki;border-right:0px solid Khaki;border-top:3px dashed">
	<input type="button" style="background-color:{{colour1.square[4][2]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[4,2])" ng-disabled="disable.square[4][2]" value="D3"></td>
				<td width="50" height="80" style="background-color:BurlyWood;border-bottom:4px solid Khaki;border-top:3px dashed;border-left: 0px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[4][3]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[4,3])" ng-disabled="disable.square[4][3]" value="D4"></td>
				<td width="50" height="80" style="background-color:BurlyWood;border-bottom:4px solid Khaki;border-top:3px dashed;border-right: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[4][4]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[4,4])" ng-disabled="disable.square[4][4]" value="D5"></td>
				<td width="25" height="80" style="background-color:BurlyWood;border-left:4px solid Khaki;border-bottom:4px solid Khaki;border-top:3px dashed;border-right:3px solid">
	<input type="button" style="background-color:{{colour1.square[4][5]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[4,5])" ng-disabled="disable.square[4][5]" value="D6"></td>
				<td width="40" height="80" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="16" ng-disabled="disable.out[16]" style="background-color:{{colour1.out[16]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[16,0])"/></td>

			</tr>
			<tr>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="30" ng-disabled="disable.out[30]" style="background-color:{{colour1.out[30]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[30,0])"/></td>
				<td width="25" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:4px solid Khaki;border-right:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[5][0]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[5,0])" ng-disabled="disable.square[5][0]" value="C1"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:4px solid Khaki;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[5][1]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[5,1])" ng-disabled="disable.square[5][1]" value="C2"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-top:4px solid Khaki;border-right:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[5][2]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[5,2])" ng-disabled="disable.square[5][2]" value="C3"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-top:4px solid Khaki;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[5][3]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[5,3])" ng-disabled="disable.square[5][3]" value="C4"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-top:4px solid Khaki;border-right: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[5][4]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[5,4])" ng-disabled="disable.square[5][4]" value="C5"></td>
				<td width="25" height="60" style="background-color:BurlyWood;border-left:4px solid Khaki;border-top:4px solid Khaki;border-right:3px solid">
	<input type="button" style="background-color:{{colour1.square[5][5]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[5,5])" ng-disabled="disable.square[5][5]" value="C6"></td>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="17" ng-disabled="disable.out[17]" style="background-color:{{colour1.out[17]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[17,0])"/></td>
			</tr>
			<!--<tr>
				<td width="50" height="60" style="border-left:3px solid;border-top:0px solid">
	<input type="button" style="background-color:{{colour1.square[7][0]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[6,0])" value="C1"></td>
				<td width="50" height="60" style="border-left:3px solid;border-top:0px solid;border-right:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[7][1]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[6,1])" value="C2"></td>
				<td width="50" height="60" style="border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[7][2]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[6,2])" value="C3"></td>
				<td width="50" height="60" style="border-top:0px solid;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[7][3]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[6,3])" value="C4"></td>
				<td width="50" height="60" style="border-right: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[7][4]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[6,4])" value="C5"></td>
				<td width="50" height="60" style="border-left:3px solid;border-top:0px solid;border-right:3px solid">
	<input type="button" style="background-color:{{colour1.square[7][5]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[6,5])" value="C6"></td>
			</tr>-->
			<tr>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="29" ng-disabled="disable.out[29]" style="background-color:{{colour1.out[29]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[29,0])"/></td>
				<td width="25" height="60" style="background-color:BurlyWood;border-left:3px solid;border-bottom:4px solid Khaki;border-top:0px solid;border-right:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[6][0]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[6,0])" ng-disabled="disable.square[6][0]" value="B1"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-left:3px solid;border-bottom:4px solid Khaki;border-top:0px solid;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[6][1]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[6,1])" ng-disabled="disable.square[6][1]" value="B2"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-bottom:4px solid Khaki;border-right:4px solid Khaki;border-top:0px solid">
	<input type="button" style="background-color:{{colour1.square[6][2]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[6,2])" ng-disabled="disable.square[6][2]" value="B3"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-bottom:4px solid Khaki;border-top:0px solid;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[6][3]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[6,3])" ng-disabled="disable.square[6][3]" value="B4"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-bottom:4px solid Khaki;border-right: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[6][4]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[6,4])" ng-disabled="disable.square[6][4]" value="B5"></td>
				<td width="25" height="60" style="background-color:BurlyWood;border-left:4px solid Khaki;border-bottom:4px solid Khaki;border-top:0px solid;border-right:3px solid">
	<input type="button" style="background-color:{{colour1.square[6][5]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[6,5])" ng-disabled="disable.square[6][5]" value="B6"></td>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="18" ng-disabled="disable.out[18]" style="background-color:{{colour1.out[18]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[18,0])"/></td>
			</tr>
			<tr>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="28" ng-disabled="disable.out[28]" style="background-color:{{colour1.out[28]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[28,0])"/></td>
				<td width="25" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:4px solid Khaki;border-bottom:3px solid;border-right:4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[7][0]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[7,0])" ng-disabled="disable.square[7][0]" value="A1"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-left:3px solid;border-top:4px solid Khaki;border-bottom:3px solid;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[7][1]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[7,1])" ng-disabled="disable.square[7][1]" value="A2"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-top:4px solid Khaki;border-right:4px solid Khaki;border-bottom:3px solid">
	<input type="button" style="background-color:{{colour1.square[7][2]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[7,2])" ng-disabled="disable.square[7][2]" value="A3"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-top:4px solid Khaki;border-left:3px solid;border-bottom:3px solid;border-left: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[7][3]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[7,3])" ng-disabled="disable.square[7][3]" value="A4"></td>
				<td width="50" height="60" style="background-color:BurlyWood;border-top:4px solid Khaki;border-bottom:3px solid;border-right: 4px solid Khaki">
	<input type="button" style="background-color:{{colour1.square[7][4]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[7,4])" ng-disabled="disable.square[7][4]" value="A5"></td>
				<td width="25" height="60" style="background-color:BurlyWood;border-left:4px solid Khaki;border-top:4px solid Khaki;border-bottom:3px solid;border-right:3px solid">
	<input type="button" style="background-color:{{colour1.square[7][5]}};width:100%;height:100%" onmousedown="myFunction(event,'square',[7,5])" ng-disabled="disable.square[7][5]" value="A6"></td>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="19" ng-disabled="disable.out[19]" style="background-color:{{colour1.out[19]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[19,0])"/></td>
			</tr>
			<tr>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="27" ng-disabled="disable.out[27]" style="background-color:{{colour1.out[27]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[27,0])"/></td>
				<td width="25" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="26" ng-disabled="disable.out[26]" style="background-color:{{colour1.out[26]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[26,0])"/></td>
				<td width="50" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="25" ng-disabled="disable.out[25]" style="background-color:{{colour1.out[25]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[25,0])"/></td>
				<td width="50" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="24" ng-disabled="disable.out[24]" style="background-color:{{colour1.out[24]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[24,0])"/></td>
				<td width="50" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="23" ng-disabled="disable.out[23]" style="background-color:{{colour1.out[23]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[23,0])"/></td>
				<td width="50" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="22" ng-disabled="disable.out[22]" style="background-color:{{colour1.out[22]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[22,0])"/></td>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="21" ng-disabled="disable.out[21]" style="background-color:{{colour1.out[21]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[21,0])"/></td>
				<td width="40" height="60" style="border-left:1px solid;border-right:1px solid;border-bottom:1px solid;border-top:1px solid"><input type="button" value="20" ng-disabled="disable.out[20]" style="background-color:{{colour1.out[20]}};width:100%;height:100%" onmousedown="myFunction(event,'out',[20,0])"/></td>

			</tr>
			</table>
		</td>
		<td>
			<table>
			<tr>
				<td><h2 style="background-color:{{colour1.P2}}">Points: {{point[1]}}</h2></td>
			</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td><input type="button" onmousedown="myFunction(event,'resetPoint',[0,0])" value="RESET-POINT" ng-disabled="disable.resetPoint"/></td>
		<td><input type="button" onmousedown="myFunction(event,'winnerPoint',[0,0])" ng-disabled="disable.winnerPoint" value="WINNER-POINT"></td>
	</tr>
	<tr><td><input type="button" onmousedown="myFunction(event,'newPoint',[0,0])" value="NEW-POINT" ng-disabled="disable.newPoint"/><br/></td></tr>
	<tr>
		<td><input type="button" onmousedown="myFunction(event,'winnerGame',[0,0])" value="WINNER-GAME" ng-disabled="disable.winnerGame"></td>
		<td><input type="button" onmousedown="myFunction(event,'newGame',[0,0])" value="NEW-GAME" ng-disabled="disable.newGame"></td>
	</tr>
	<tr>
			<td><input type="button" onmousedown="myFunction(event,'endMatch',[0,0])" value="END-MATCH" ng-disabled="disable.endMatch"></td>
	</tr>
	<tr>
		<td><input type="button" ng-click="saveState()" value="SAVE-STATE"></td>
		<td><input type="button" ng-click="loadState()" value="LOAD-STATE"></td>
		<td><input type="file" id="uploadFileBox" style="display:{{visible.uploadFileBox}}" onchange="OnFileLoad()"></td>
	</tr>
	<tr><td><a download={{downloadFileName}} id="downloadlink" style="display: none">Download</a></td></tr>
	</table>
</td>
<td>
	<table>
	<tr>	
		<td><span style="color:{{colour1.forcedError}}">Forced Error: </span><input type="checkbox" ng-model="value.forcedError" onmousedown="myFunction(event,'forcedError',[0,0])" ng-disabled="disable.forcedError" value="FORCED-ERROR"></td>
	</tr>	
	<tr>
		<td><span style="color:{{colour1.unforcedError}}">Unforced Error: </span><input type="checkbox" ng-model="value.unforcedError" onmousedown="myFunction(event,'unforcedError',[0,0])" ng-disabled="disable.unforcedError" value="UNFORCED-ERROR"></td>
	</tr>
	<tr>
		<td><span style="color:{{colour1.winner}}">Winner: </span><input type="checkbox" ng-model="value.winner" onmousedown="myFunction(event,'winner',[0,0])" ng-disabled="disable.winner" value="WINNER"></td>
	</tr>
	</table>
</td>
<!--
<td>
	
CURRENT STATE: {{currentState}}<br/>
PREVIOUS STATE: {{prevState}}<br/>
CURRENT CLICK: {{items[currentClick.coordinates[0]]+""+(currentClick.coordinates[1]+1)}}<br/>
PREVIOUS CLICK: {{items[prevClick.coordinates[0]]+""+(prevClick.coordinates[1]+1)}}<br/>
colour1 StoRE: {{colour1.store}}<br/>
colour1 square current coords : {{colour1.square[currentClick.coordinates[0]][currentClick.coordinates[1]]}}<br/>
colour1Store: {{colour1Store.net}}<br/>
tempVar: {{tempVar}}<br/>	
pushInd:{{pushInd}}<br/>
distinction:{{distinction}}
</td>
-->
<!--
<td>
	<ul>
		<li ng-repeat="x in data">{{x.entry}}</li>
	</ul>
</td>
-->

<td>
	<table>
	<tr>
		<td>
				<table border="1" style="border-collapse:collapse">
					<th>From</th>
					<th>To</th>
					<th>Condition</th>
					<th>Distinction</th>
					<tr ng-repeat="x in displayRally">
						<td>{{x.from}}</td>
						<td>{{x.to}}</td>
						<td>{{x.condition}}</td>
						<td>{{x.distinction}}</td>
					</tr>
					<tr><td colspan="4" align="center">{{gameEnd}}</td><tr>
				</table>
		</td>
		<td>
			<h2>Player Names:</h2><br/>
			Player 1: <input type="text" ng-model="player1ID"><br/>
			Player 2: <input type="text" ng-model="player2ID"><br/>
		</td>
		<td>

			<h3>game</h3> {{gameNum}}	<h3>rally</h3>{{rallyNum}}

		</td>
		<td>
			<table border="1" style="border-collapse:collapse">
				<th>Game</th><th>Winner</th>
				<tr ng-repeat="x in gameWinners">
				<td>{{x.game}}</td><td>{{x.winner}}</td>
				</tr>
			</table>
		</td>
	</tr>
</table>	        
</td>

</tr>
</table><br/>
<!--<p>{{"data length "+data.length}}</p>-->
</div><br/>
<p id="demo"></p>
<script>
//accumulate rallies in match	
var match={"games":[]};
//accumulate rallies in game
var game={"rallies":[]};
//accumulate a rally in "rally"
var rally={
		"gameId":3,
		"servedBy":0,
		"strokes":[],
		"winType":"",
		"errorType":"",
		"wonBy":0
	};//update servedBy, winType and errorType
var pointNum=0;
var app=angular.module("myApp",[]);
app.controller("myCtrl",function($scope,$http)
{

$scope.gameWinners=[];
$scope.distinction=false;//to indicate BH/OH distinction
$scope.player1ID="Anand";
$scope.player2ID="Dharini";
$scope.data=[];
$scope.displayRally=[];
$scope.gameEnd="";
$scope.items=['H','G','F','E','D','C','B','A'];
$scope.downloadFileName="";
$scope.currentClick={element:"",coordinates:[-1,-1],mouseButton:""};
$scope.prevClick={element:"",coordinates:[-2,-2],mouseButton:""};
$scope.gameNum=1;
$scope.rallyNum=1;
$scope.currentState="initial";
$scope.prevState="";
//states=["initial","Service!","ServiceError","GreatService","rallyx","rallyy","X","Y"];
$scope.serviceSquare="";
$scope.currentSide="";
$scope.pushInd=1;//pushIndicator
$scope.point=[0,0];
$scope.thirdSetMidSwitch=true;
$scope.visible={uploadFileBox:"none"};
$scope.value={	
							forcedError:"garbage",
							unforcedError:"garbage",
							winner:"garbage"
	      		};
$scope.winnerPoint="";
$scope.disable={square:[
		      [true,false,false,false,false,true],/*row H*/
		      [true,false,false,false,false,true],/*row G*/
		      [true,false,false,false,false,true],/*row F*/
		      [true,true,true,true,true,true],/*row E*/
		      [true,true,true,true,true,true],/*row D*/
		      [true,false,false,false,false,true],/*row C*/
		      [true,false,false,false,false,true],/*row B*/
		      [true,false,false,false,false,true]/*row A*/
		      ],
		net:true,
		out:[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true],
		winnerPoint:true,
		newPoint:true,
		resetPoint:true,
		newGame:true,
		winnerGame:true,
		endMatch:true,
		forcedError:true,
		unforcedError:true,
		winner:true,
		middleClickSquare:[
			      [true,true,true,true,true,true],/*row H*/
			      [true,true,true,true,true,true],/*row G*/
			      [true,true,true,true,true,true],/*row F*/
			      [true,true,true,true,true,true],/*row E*/
			      [true,true,true,true,true,true],/*row D*/
			      [true,true,true,true,true,true],/*row C*/
			      [true,true,true,true,true,true],/*row B*/
			      [true,true,true,true,true,true]/*row A*/
			    		],
		leftClickSquare:[
				[true,false,false,false,false,true],
				[true,false,false,false,false,true],
				[true,false,false,false,false,true],
				[true,true,true,true,true,true],
				[true,true,true,true,true,true],
				[true,false,false,false,false,true],
				[true,false,false,false,false,true],
				[true,false,false,false,false,true]
				]
		};
$scope.colour1={P1:"pink",
		P2:"orange",
		square:[["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"]],
			net:"white",
		out:["white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white"],
		forcedError:"gray",
		unforcedError:"gray",
		winner:"gray",
		store:"",
		serviceStore:"",
		"distinction":""
		};
$scope.colour2={square:[["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"]],
		net:"gray",
		out:["gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray"],
		service:"blue"
		};
$scope.colour3={square:[["red","red","red","red","red","gray"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"]]
		};
$scope.gameScore={player1:0,player2:0};
$scope.tmp="";
$scope.leftClickSquare=function(x)
	{
	if(!$scope.disable.leftClickSquare[x[0]][x[1]])		
		{
		switch($scope.currentState)
			{
				case "initial":{
							$scope.serviceSquare=x;
							$scope.currentClick={element:"square",coordinates:x,mousebutton:"left"};
							$scope.currentState="Service!";
							$scope.disable.resetPoint=false;
							$scope.tmp=$scope.colour1.square[x[0]][x[1]];$scope.colour1.square[x[0]][x[1]]=$scope.colour2.square[x[0]][x[1]];$scope.colour2.square[x[0]][x[1]]=$scope.colour3.square[x[0]][x[1]];$scope.colour3.square[x[0]][x[1]]=$scope.tmp;
							$scope.disable.net=false;
							for(var i=0;i<$scope.disable.out.length;i++)
								{$scope.disable.out[i]=false;}
							for(var i=0;i<$scope.disable.square.length;i++)
								{
									for(var j=0;j<=5;j++)
										{	
											$scope.disable.square[i][j]=false;
											if($scope.serviceSquare[0]>3){if(i>3){$scope.disable.leftClickSquare[i][j]=true;}else{$scope.disable.leftClickSquare[i][j]=false;}}
											else{if(i>3){$scope.disable.leftClickSquare[i][j]=false;}else{$scope.disable.leftClickSquare[i][j]=true;}}		
											if((i!=$scope.serviceSquare[0])||(j!=$scope.serviceSquare[1])){$scope.disable.middleClickSquare[i][j]=false;}
											else
												{$scope.disable.leftClickSquare[i][j]=false;}
										}
								}
						}
						break;
				case "Service!"	:
							if(x[0]==$scope.serviceSquare[0]&&x[1]==$scope.serviceSquare[1])//If toggling service square colour
								{
									if(angular.equals($scope.colour1.square[x[0]][x[1]],"red"))
										{
											$scope.leftClickresetPoint();
										}
									else
										{
											$scope.tmp=$scope.colour1.square[x[0]][x[1]];$scope.colour1.square[x[0]][x[1]]=$scope.colour2.square[x[0]][x[1]];$scope.colour2.square[x[0]][x[1]]=$scope.colour3.square[x[0]][x[1]];$scope.colour3.square[x[0]][x[1]]=$scope.tmp;
										}
								}
							else//x must be on receiver(y) side
								{

									if($scope.pushInd==1)
										{
								var temp=angular.equals($scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]],"red")?"Backhand":"Forehand";var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;
											if($scope.serviceSquare[0]>3)	
												{
													$scope.data.push({entry:"service: Player 2 square: "+$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1)});
													rally.servedBy=$scope.player2ID;
												}
											else
												{
													$scope.data.push({entry:"service: Player 1 square:"+$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1)});
													rally.servedBy=$scope.player1ID;
												}
											$scope.displayRally.push({"from":$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1),"to":"","condition":temp,"distinction":distinction});
											rally.strokes.push({"from":$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1),"to":"","condition":temp,"distinction":distinction});
											$scope.colour1.store=$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]];
											$scope.pushInd=0;
											$scope.prevClick=$scope.currentClick;
											$scope.prevState=$scope.currentState;
										}
									$scope.colour1.store=$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]];$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]="BurlyWood";$scope.colour2.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]="green";$scope.colour3.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]="red";//Leaving "Service!" state, so toggling the service square colour
									$scope.tmp=$scope.colour1.square[x[0]][x[1]];$scope.colour1.square[x[0]][x[1]]=$scope.colour2.square[x[0]][x[1]];$scope.colour2.square[x[0]][x[1]]=$scope.colour3.square[x[0]][x[1]];$scope.colour3.square[x[0]][x[1]]=$scope.tmp;
									$scope.currentClick={element:"square",coordinates:x,mousebutton:"left"};
									var start=$scope.serviceSquare[0]>3?4:0;//start is the starting row of the x side
									for(var i=start;i<=start+3;i++)//enable x side squares+MC+LC
										{
											for(var j=0;j<=5;j++)
												{	
													$scope.disable.square[i][j]=false;
													$scope.disable.leftClickSquare[i][j]=false;
													$scope.disable.middleClickSquare[i][j]=false;
												}
										}
									var start=$scope.serviceSquare[0]>3?0:4;//start is the starting row of the y side
									for(var i=start;i<=start+3;i++)//y side squares disable LC!=x MC!=x enable LC=x MC=x 
										{
											for(var j=0;j<=5;j++)
												{
													$scope.disable.square[i][j]=false;
													if(i!=$scope.currentClick.coordinates[0]||j!=$scope.currentClick.coordinates[1])
														{
															$scope.disable.leftClickSquare[i][j]=true;
															$scope.disable.middleClickSquare[i][j]=false;
														}
													else
														{
															$scope.disable.leftClickSquare[i][j]=false;
															$scope.disable.middleClickSquare[i][j]=false;
														}
												}
										}
									$scope.disable.net=false;
									for( var i=0;i<$scope.disable.out.length;i++)
										{
											$scope.disable.out[i]=false;
										}
									$scope.currentState="rallyy";
								}
						break;
					case "rallyy"://Entered into "rallyy" (ideally should now LC a square on the x side to change to rallyx), am now LC'ing a square
						$scope.tmp=$scope.colour1.square[x[0]][x[1]];$scope.colour1.square[x[0]][x[1]]=$scope.colour2.square[x[0]][x[1]];$scope.colour2.square[x[0]][x[1]]=$scope.colour3.square[x[0]][x[1]];$scope.colour3.square[x[0]][x[1]]=$scope.tmp;
						if(angular.equals($scope.prevState,"Service!"))
							{	
								if(x[0]!=$scope.currentClick.coordinates[0]||x[1]!=$scope.currentClick.coordinates[1])//if LC'ing new square, must be on the x side as y side LC is only enabled for same square colour toggling
									{
										$scope.prevState=$scope.currentState;
										$scope.prevClick=$scope.currentClick;
										$scope.colour1.store=$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]];//storing for backpeddling reasons
										$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="BurlyWood";
										$scope.colour2.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="green";
										$scope.colour3.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="red";
										$scope.currentClick={element:"square",coordinates:x,mousebutton:"left"};
										if(!$scope.distinction)
											{
												var temp=angular.equals($scope.colour1.store,"red")?"above":"below";
											}
										else
											{
												var temp=angular.equals($scope.colour1.distinction,"red")?"above":"below";
											}
										var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;

										if($scope.serviceSquare[0]>3)//Service Player 2 so rallyy corresponds to Player 1
											{
												$scope.data.push({entry:"rally: Player 1 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});
											}
										else//Service Player 1 so rallyy corresponds to Player 2
											{
												$scope.data.push({entry:"rally: Player 2 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});
											}
										$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
										rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
										$scope.displayRally.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
										rally.strokes.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
										//enable yside square+MC+LC all
										var start=$scope.serviceSquare[0]>3?0:4;//gives yside
										for(var i=start;i<=start+3;i++)
											{
												for(var j=0;j<=5;j++)
													{
														$scope.disable.square[i][j]=false;
														$scope.disable.leftClickSquare[i][j]=false;
														$scope.disable.middleClickSquare[i][j]=false;
													}
											}
										//disable MC=x
										$scope.disable.middleClickSquare[$scope.currentClick.coordinates[0]][$scope.currentClick.coordinates[1]]=true;
										var start=$scope.serviceSquare[0]>3?4:0;//gives x side
										//disable all x side!=x LC enable x side!=x MC squares+LC+MC disable x MC
										for(var i=start;i<=start+3;i++)
											{
												for(var j=0;j<=5;j++)
													{
														if(i!=$scope.currentClick.coordinates[0]||j!=$scope.currentClick.coordinates[1])
															{
																$scope.disable.square[i][j]=false;
																$scope.disable.leftClickSquare[i][j]=true;
																$scope.disable.middleClickSquare[i][j]=false;
															}
														else
															{
																$scope.disable.middleClickSquare[i][j]=false;
															}
													}
											}
										$scope.prevState=$scope.currentState;
										$scope.currentState="rallyx";
										
									}
								else//if toggling last LC'd square's colour on the y side
									{
										$scope.currentClick={element:"square",coordinates:x,mousebutton:"left"};
										switch($scope.colour1.square[x[0]][x[1]])
											{
												case "BurlyWood"://enable all y side squares, net, out, only enable MC on service side sqs!=service Sq,disable service Sq square and give it it's service Sq colour, change state to "Service!"
													{	$scope.disable.net=false;
														for(var i=0;i<$scope.disable.out.length;i++){$scope.disable.out[i]=false;}
														for(var i=0;i<$scope.disable.square.length;i++)
															{
																for(var j=0;j<=5;j++)
																	{
																		if(($scope.serviceSquare[0]>3&&i>3)||($scope.serviceSquare[0]<=3&&i<=3))//if on service side
																			{
																				$scope.disable.leftClickSquare[i][j]=true;
																				if(i!=$scope.serviceSquare[0]||j!=$scope.serviceSquare[1])
																					{
																						$scope.disable.middleClickSquare[i][j]=false;
																					}
																				else
																					{
																						$scope.disable.square[i][j]=true;
																						$scope.disable.middleClickSquare[i][j]=true;
																					}
																			}
																		else
																			{
																				$scope.disable.leftClickSquare[i][j]=false;
																				$scope.disable.middleClickSquare[i][j]=false;
																				$scope.disable.square[i][j]=false;
																			}
																	}	
															}
														$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]=$scope.colour1.store;//Entering "Service!" state, so toggling the service square colour

														$scope.currentState="Service!";
													}
													break;
												default: //$scope.currentState="rallyy";
											}
									}
							}
						else//currently in "rallyy" prevState is not "Service!" and am LC'ing a square
							{//either toggling the colour of a previous rallyy LC or backpeddling or LC'ing x side
								if(x[0]==$scope.currentClick.coordinates[0]&&x[1]==$scope.currentClick.coordinates[1])// if toggling a rallyy colour
									{	
										$scope.currentClick={element:"square",coordinates:x,mousebutton:"left"};
										if(angular.equals($scope.colour1.square[$scope.currentClick.coordinates[0]][$scope.currentClick.coordinates[1]],"BurlyWood"))
											{//backpeddling to x side
										 	//toggle rallyx prevClick square to it's stored colour
												$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]=$scope.colour1.store;
											 //enable+MC x side squares!=prevClick disable LC all prevClick side squares.
											 	var start=$scope.serviceSquare[0]>3?4:0;//start is the least row in the x side
												for(var i=start;i<=start+3;i++)
													{
														for(var j=0;j<=5;j++)
															{
																$scope.disable.leftClickSquare[i][j]=true;
																if(i!=$scope.prevClick.coordinates[0]||j!=$scope.prevClick.coordinates[1])
																	{
																		$scope.disable.square[i][j]=false;
																		$scope.disable.middleClickSquare[i][j]=false;
																	}
																else
																	{
																		$scope.disable.square[i][j]=true;
																		$scope.disable.middleClickSquare[i][j]=true;
																	}
															}
													}
											 //enable+MC+LC y side(current side) squares
											 	var start=$scope.serviceSquare[0]>3?0:4;//start is the least row in the y side
												for(var i=start;i<=start+3;i++)
													{
														for(var j=0;j<=5;j++)
															{
																$scope.disable.square[i][j]=false;
																$scope.disable.middleClickSquare[i][j]=false;
																$scope.disable.leftClickSquare[i][j]=false;
															}
													}
												$scope.colour1.square[$scope.currentClick.coordinates[0]][$scope.currentClick.coordinates[1]]="BurlyWood";
												$scope.colour2.square[$scope.currentClick.coordinates[0]][$scope.currentClick.coordinates[1]]="green";
												$scope.colour3.square[$scope.currentClick.coordinates[0]][$scope.currentClick.coordinates[1]]="red";
												$scope.currentClick=$scope.prevClick;
												$scope.currentState="rallyx";//backpeddling to x side

											}
									}
								else if(angular.equals($scope.currentState,$scope.prevState))//backpeddled from rallyx, heading to rallyx with x click
									{//LC'ing here is only possible on x side as y side LC is disabled before backpeddling
										$scope.tempVar="backpeddled from rallyx";
										$scope.currentClick={element:"square",coordinates:x,mousebutton:"left"};
										$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="BurlyWood";
										$scope.currentState="rallyx";
										//disable all xside!=x LC, enable x:square+LC+MC
										// enable all y side fully
										var start=$scope.serviceSquare[0]>3?4:0;//gets x side
										for(var i=start;i<=start+3;i++)
											{
												for(var j=0;j<=5;j++)
													{
														if(i!=$scope.currentClick.coordinates[0]||j!=$scope.currentClick.coordinates[1])
															{
																$scope.disable.leftClickSquare[i][j]=true;
																$scope.disable.middleClickSquare[i][j]=false;
																$scope.disable.square[i][j]=false;
															}
														else
															{
																$scope.disable.square[i][j]=false;
																$scope.disable.leftClickSquare[i][j]=false;
																$scope.disable.middleClickSquare[i][j]=false;
															}
														
													}
											}
										var start=$scope.serviceSquare[0]>3?0:4;//gets y side
										for(var i=start;i<=start+3;i++)
											{
												for(var j=0;j<=5;j++)
													{
														$scope.disable.square[i][j]=false;
														$scope.disable.leftClickSquare[i][j]=false;
														$scope.disable.middleClickSquare[i][j]=false;														
													}
											}
									}
								else
									{//LC entering x side legitimately, i.e. from a rallyy and not backpeddling
									if(($scope.prevClick.coordinates[0]>3&&$scope.serviceSquare[0]>3)||($scope.prevClick.coordinates[0]<=3&&$scope.serviceSquare[0]<=3))//if prevClick side==service side rallyy wasnt pushed
										{
										//get current prevClick
											$scope.prevClick=$scope.currentClick;
											$scope.colour1.store=$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]];
										//push prevClick(rally y)
										if(!$scope.distinction)
											{
												var temp=angular.equals($scope.colour1.store,"red")?"above":"below";
											}
										else
											{
												var temp=angular.equals($scope.colour1.distinction,"red")?"above":"below";
											}
											var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;
											if($scope.serviceSquare[0]>3)//x side is player 2 y side is player 1
												{
													$scope.data.push({entry:"rally: Player 1 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});
												}
											else
												{
													$scope.data.push({entry:"rally: Player 2 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});
												}
										$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
										rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
										$scope.displayRally.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
										rally.strokes.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
										}
									$scope.prevState=$scope.currentState;
									$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="BurlyWood";
									$scope.colour2.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="green";
									$scope.colour3.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="red";
									$scope.currentState="rallyx";
									$scope.currentClick={element:"square",coordinates:x,mousebutton:"left"};
									//enable y side all
									 	var start=$scope.serviceSquare[0]>3?0:4;//start is the least row in the y side
										for(var i=start;i<=start+3;i++)
											{
												for(var j=0;j<=5;j++)
													{
														$scope.disable.leftClickSquare[i][j]=false;
														$scope.disable.square[i][j]=false;
														$scope.disable.middleClickSquare[i][j]=false;
													}
											}
									//enable x side!=x square+MC disable LC x side!=x
									//enable x side=x square+MC+LC
									 	var start=$scope.serviceSquare[0]>3?4:0;//start is the least row in the x side
										for(var i=start;i<=start+3;i++)
											{
												for(var j=0;j<=5;j++)
													{
														if(i!=$scope.currentClick.coordinates[0]||j!=$scope.currentClick.coordinates[1])
															{
																$scope.disable.leftClickSquare[i][j]=true;
																$scope.disable.square[i][j]=false;
																$scope.disable.middleClickSquare[i][j]=false;
															}
														else
															{
																$scope.disable.leftClickSquare[i][j]=false;
																$scope.disable.square[i][j]=false;
																$scope.disable.middleClickSquare[i][j]=false;																
															}
													}
											}
									}
							}
						break;
					case "rallyx"://Entered into "rallyx" (ideally should now LC a square on the y side to change to rallyy), am now LC'ing a square
							//either toggling a colour of a previous rallyx LC  or backpeddling to rallyy or entering LC'ing y side
							$scope.tmp=$scope.colour1.square[x[0]][x[1]];$scope.colour1.square[x[0]][x[1]]=$scope.colour2.square[x[0]][x[1]];$scope.colour2.square[x[0]][x[1]]=$scope.colour3.square[x[0]][x[1]];$scope.colour3.square[x[0]][x[1]]=$scope.tmp;
								if(x[0]==$scope.currentClick.coordinates[0]&&x[1]==$scope.currentClick.coordinates[1])// if toggling a rallyx colour
									{
										$scope.currentClick={element:"square",coordinates:x,mousebutton:"left"};
										if(angular.equals($scope.colour1.square[$scope.currentClick.coordinates[0]][$scope.currentClick.coordinates[1]],"BurlyWood"))
											{//backpeddling to y side
											 //toggle rallyy prevClick square to it's stored colour
												$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]=$scope.colour1.store;
											 //enable+MC y side squares!=prevClick disable LC all prevClick side squares.
											 	var start=$scope.serviceSquare[0]>3?0:4;//start is the least row in the y side
												for(var i=start;i<=start+3;i++)
													{
														for(var j=0;j<=5;j++)
															{
																$scope.disable.leftClickSquare[i][j]=true;
																if(i!=$scope.prevClick.coordinates[0]||j!=$scope.prevClick.coordinates[1])
																	{
																		$scope.disable.square[i][j]=false;
																		$scope.disable.middleClickSquare[i][j]=false;
																	}
																else
																	{
																		$scope.disable.square[i][j]=true;
																		$scope.disable.middleClickSquare[i][j]=true;
																	}
															}
													}
											 //enable+MC+LC x side(current side) squares
											 	var start=$scope.serviceSquare[0]>3?4:0;//start is the least row in the x side
												for(var i=start;i<=start+3;i++)
													{
														for(var j=0;j<=5;j++)
															{
																$scope.disable.square[i][j]=false;
																$scope.disable.middleClickSquare[i][j]=false;
																$scope.disable.leftClickSquare[i][j]=false;
															}
													}
												$scope.currentState=$scope.prevState;//backpeddling to y side
												$scope.colour2.square[$scope.currentClick.coordinates[0]][$scope.currentClick.coordinates[1]]="green";
												$scope.colour3.square[$scope.currentClick.coordinates[0]][$scope.currentClick.coordinates[1]]="red";
												$scope.currentClick=$scope.prevClick;//for backpeddling to y
											}
									}
								else if(angular.equals($scope.currentState,$scope.prevState))//backpeddled from rallyy, entering rallyy with x click
									{//LC'ing here is (only possible) on y side as x side LC is disabled after backpeddling
										$scope.currentClick={element:"square",coordinates:x,mousebutton:"left"};
										$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="BurlyWood";
										$scope.currentState="rallyy";
										//disable all yside!=x LC, enable x:square+LC+MC
										// enable all y side fully
										var start=$scope.serviceSquare[0]>3?0:4;//gets y side
										for(var i=start;i<=start+3;i++)
											{
												for(var j=0;j<=5;j++)
													{
														if(i!=$scope.currentClick.coordinates[0]||j!=$scope.currentClick.coordinates[1])
															{
																$scope.disable.square[i][j]=false;
																$scope.disable.leftClickSquare[i][j]=true;
																$scope.disable.middleClickSquare[i][j]=false;
															}
														else
															{
																$scope.disable.square[i][j]=false;
																$scope.disable.leftClickSquare[i][j]=false;
																$scope.disable.middleClickSquare[i][j]=false;
															}
														
													}
											}
										var start=$scope.serviceSquare[0]>3?4:0;//gets x side
										for(var i=start;i<=start+3;i++)
											{
												for(var j=0;j<=5;j++)
													{
														$scope.disable.square[i][j]=false;
														$scope.disable.leftClickSquare[i][j]=false;
														$scope.disable.middleClickSquare[i][j]=false;														
													}
											}


									}
								else//LC'ing a new square on y side only as x side LC means toggle only
									{
									$scope.prevState=$scope.currentState;
									if(($scope.prevClick.coordinates[0]>3&&$scope.serviceSquare[0]<=3)||($scope.prevClick.coordinates[0]<=3&&$scope.serviceSquare[0]>3))//if prevClick side!=service side rallyx wasn't pushed
										{
											$scope.prevClick=$scope.currentClick;
											$scope.tempVar="legal rallyx"
											$scope.colour1.store=$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]];//storing for backpeddling reasons
										//push prevClick(rally x)
										if(!$scope.distinction)
											{
												var temp=angular.equals($scope.colour1.store,"red")?"above":"below";
											}
										else
											{
												var temp=angular.equals($scope.colour1.distinction,"red")?"above":"below";
											}
											var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;
											if($scope.serviceSquare[0]>3)//x side is player 2 y side is player 1
												{
													$scope.data.push({entry:"rally: Player 2 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});
												}
											else
												{
													$scope.data.push({entry:"rally: Player 1 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});
												}
										$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
										rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
										$scope.displayRally.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
										rally.strokes.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
										}
										$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="BurlyWood";
										$scope.colour2.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="green";
										$scope.colour3.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="red";
										$scope.currentState="rallyy";
										$scope.currentClick={element:"square",coordinates:x,mousebutton:"left"};				
									//enable x side all
									 	var start=$scope.serviceSquare[0]>3?4:0;//start is the least row in the x side
										for(var i=start;i<=start+3;i++)
											{
												for(var j=0;j<=5;j++)
													{
														$scope.disable.leftClickSquare[i][j]=false;
														$scope.disable.square[i][j]=false;
														$scope.disable.middleClickSquare[i][j]=false;
													}
											}
									//enable y side!=x square+MC disable LC y side!=x
									//enable y side=x+LC+MC
									 	var start=$scope.serviceSquare[0]>3?0:4;//start is the least row in the y side
										for(var i=start;i<=start+3;i++)
											{
												for(var j=0;j<=5;j++)
													{
														if(i!=$scope.currentClick.coordinates[0]||j!=$scope.currentClick.coordinates[1])
															{
																$scope.disable.leftClickSquare[i][j]=true;
																$scope.disable.square[i][j]=false;
																$scope.disable.middleClickSquare[i][j]=false;
															}
														else
															{
																$scope.disable.leftClickSquare[i][j]=false;
																$scope.disable.square[i][j]=false;
																$scope.disable.middleClickSquare[i][j]=false;																
															}
													}
											}
									}
							
						break;
					default:
			}
		}
	};
$scope.middleClickSquare=function(x)
	{
		if(!$scope.disable.middleClickSquare[x[0]][x[1]])
			{
				if(((angular.equals($scope.colour1.square[x[0]][x[1]],"BurlyWood"))||(angular.equals($scope.colour1.square[x[0]][x[1]],"gray")))&&(!($scope.distinction)))
					{
						switch($scope.currentState)
							{
								case "Service!":
									if($scope.pushInd==1)
										{
											var temp=angular.equals($scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]],"red")?"Backhand":"Forehand";var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;
														if($scope.serviceSquare[0]>3)	
															{
																$scope.data.push({entry:"service: Player 2 square: "+$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1)});
																rally.servedBy=$scope.player2ID;
															}
														else
															{
																$scope.data.push({entry:"service: Player 1 square:"+$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1)});
																rally.servedBy=$scope.player1ID;											
															}
														$scope.displayRally.push({"from":$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1),"to":"","condition":temp,"distinction":distinction});
														rally.strokes.push({"from":$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1),"to":"","condition":temp,"distinction":distinction});
														$scope.pushInd=0;
														$scope.prevClick=$scope.currentClick;
														$scope.prevState=$scope.currentState;
										}
										$scope.colour1.serviceStore=$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]];
										$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]="BurlyWood";$scope.colour2.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]="green";$scope.colour3.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]="red";
										$scope.colour1.store=$scope.colour1.square[x[0]][x[1]];$scope.colour1.square[x[0]][x[1]]="gray";
										$scope.disable.net=true;
										$scope.disable.resetPoint=true;
										$scope.currentClick={element:"square",coordinates:x,button:"middle"};
										for(var i=0;i<$scope.disable.out.length;i++)
											{
												$scope.disable.out[i]=true;
											}
										for(var i=0;i<$scope.disable.square.length;i++)
											{
												for(var j=0;j<=5;j++)
													{
														if((i!=x[0])||(j!=x[1]))
															{
																$scope.disable.square[i][j]=true;
																$scope.disable.leftClickSquare[i][j]=true;
															}
													}
											}
										$scope.disable.leftClickSquare[x[0]][x[1]]=true;
										$scope.disable.middleClickSquare[x[0]][x[1]]=false;
										$scope.disable.winnerPoint=false;
										if((($scope.serviceSquare[1]>2&&$scope.currentClick.coordinates[1]<=2)||($scope.serviceSquare[1]<=2&&$scope.currentClick.coordinates[1]>2))&&(($scope.	serviceSquare[0]>3&&$scope.currentClick.coordinates[0]<=3)||($scope.serviceSquare[0]<=3&&$scope.currentClick.coordinates[0]>3))&&($scope.currentClick.coordinates[0]!=3)&&($scope.currentClick.coordinates[0]!=4)&&$scope.currentClick.coordinates[1]>0&&$scope.currentClick.coordinates[1]<5)
											{
												$scope.currentState="GreatService";
												$scope.value.forcedError=false;
												$scope.value.unforcedError=false;
												$scope.value.winner=true;
												$scope.disable.winnerPoint=false;
												$scope.disable.resetPoint=false;
											}
										else
											{
												$scope.currentState="ServiceError";
												$scope.value.forcedError=true;
												$scope.value.unforcedError=false;
												$scope.value.winner=false;
												$scope.disable.winnerPoint=false;
												$scope.disable.resetPoint=false;
											}	
									break;
								case "ServiceError"://toggling a square gray
										$scope.colour1.square[x[0]][x[1]]=$scope.colour1.store;
										for(var i=0;i<$scope.disable.out.length;i++)
											{
												$scope.disable.out[i]=false;
											}
										for(var i=0;i<8;i++)
											{
												for(var j=0;j<6;j++)
													{
															$scope.disable.middleClickSquare[i][j]=false;
														if(i!=$scope.serviceSquare[0]||j!=$scope.serviceSquare[1])
															{
																$scope.disable.square[i][j]=false;
															}
														else
															{
																$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]=$scope.colour1.store;//every time I leave the "Service!" state I will toggle the colour of the Service square to BurlyWood, so every time I enter the "Service!" state, I toggle it back to service colour
																$scope.disable.middleClickSquare[i][j]=true;
															}
														if((i>3&&$scope.serviceSquare[0]>3)||(i<=3&&$scope.serviceSquare[0]<=3))//if i is on service side
															{
																$scope.disable.leftClickSquare[i][j]=true;
															}
														else
															{
																$scope.disable.leftClickSquare[i][j]=false;
																$scope.disable.middleClickSquare[i][j]=false;
															}
													}
											}
										$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]=$scope.colour1.serviceStore;
										$scope.currentState="Service!";
										$scope.disable.net=false;
										$scope.currentClick=$scope.prevClick;
										$scope.disable.resetPoint=false;
										$scope.disable.forcedError=true;
										$scope.disable.unforcedError=true;
										$scope.colour1.forcedError="gray";
										$scope.colour1.unforcedError="gray";
										$scope.value.forcedError="garbage";
										$scope.value.unforcedError="garbage";
									break;
								case "GreatService":
										$scope.colour1.square[x[0]][x[1]]=$scope.colour1.store;
										for(var i=0;i<$scope.disable.out.length;i++)
											{
												$scope.disable.out[i]=false;
											}
										for(var i=0;i<8;i++)
											{
												for(var j=0;j<6;j++)
													{
															$scope.disable.middleClickSquare[i][j]=false;
														if(i!=$scope.serviceSquare[0]||j!=$scope.serviceSquare[1])
															{
																$scope.disable.square[i][j]=false;
															}
														else
															{
																$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]=$scope.colour1.store;//every time I leave the "Service!" state I will toggle the colour of the Service square to BurlyWood, so every time I enter the "Service!" state, I toggle it back to service colour
																$scope.disable.middleClickSquare[i][j]=true;
															}
														if((i>3&&$scope.serviceSquare[0]>3)||(i<=3&&$scope.serviceSquare[0]<=3))//if i is on service side
															{
																$scope.disable.leftClickSquare[i][j]=true;
															}
														else
															{
																$scope.disable.leftClickSquare[i][j]=false;
																$scope.disable.middleClickSquare[i][j]=false;
															}
													}
											}
										$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]=$scope.colour1.serviceStore;
										$scope.disable.net=false;
										$scope.currentState="Service!";
										$scope.currentClick=$scope.prevClick;
										$scope.disable.resetPoint=false;
										$scope.disable.forcedError=true;
										$scope.disable.unforcedError=true;
										$scope.colour1.forcedError="gray";
										$scope.colour1.unforcedError="gray";
										$scope.value.forcedError="garbage";
										$scope.value.unforcedError="garbage";						
									break;
								case "rallyx":
										if(($scope.prevClick.coordinates[0]>3&&$scope.serviceSquare[0]<=3)||($scope.prevClick.coordinates[0]<=3&&$scope.serviceSquare[0]>3))//if prevClick side!=service side rallyx wasnt pushed
										{
											$scope.prevClick=$scope.currentClick;
											$scope.colour1.store=$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]];//storing for backpeddling reasons
											if(!$scope.distinction)
											{
												var temp=angular.equals($scope.colour1.store,"red")?"above":"below";
											}
										else
											{
												var temp=angular.equals($scope.colour1.distinction,"red")?"above":"below";
											}
											var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;
											if($scope.serviceSquare[0]>3)//Service Player 2 so rallyy corresponds to Player 1
												{
													$scope.data.push({entry:"rally: Player 1 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});
												}
											else//Service Player 1 so rallyy corresponds to Player 2
												{
													$scope.data.push({entry:"rally: Player 2 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});
												}
											$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
											$scope.displayRally.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
											rally.strokes.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
										}
										$scope.prevState=$scope.currentState;
										$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="BurlyWood";
										$scope.colour2.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="green";
										$scope.colour3.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="red";
										$scope.currentClick={element:"square",coordinates:x,mousebutton:"middle"};	
										$scope.currentState="X";//this is the "error" state reached after "rallyx"
										$scope.colour1.square[$scope.currentClick.coordinates[0]][$scope.currentClick.coordinates[1]]="gray";
										//disable all squares!=x disable LC all squares, enable MC=x
										for(var i=0;i<8;i++)
											{
												for(var j=0;j<6;j++)
													{
														$scope.disable.leftClickSquare[i][j]=true;
														if(i!=$scope.currentClick.coordinates[0]||j!=$scope.currentClick.coordinates[1])
															{
																$scope.disable.square[i][j]=true;
															}
														else
															{
																$scope.disable.square[i][j]=false;
																$scope.disable.middleClickSquare[i][j]=false;
															}
													}
											}
										//disable all outs
										for(var i=0;i<$scope.disable.out.length;i++)
											{
												$scope.disable.out[i]=true;
											}
										$scope.disable.net=true;
										$scope.disable.resetPoint=false;
										$scope.disable.forcedError=false;
										$scope.disable.unforcedError=false;
										$scope.disable.winner=false;
										$scope.colour1.forcedError="black";
										$scope.colour1.unforcedError="black";
										$scope.colour1.winner="black";
										$scope.value.forcedError="garbage";
										$scope.value.unforcedError="garbage";
										$scope.value.winner="garbage";
									break;
								case "X"://can only be toggling the grey square
										$scope.colour1.square[$scope.currentClick.coordinates[0]][$scope.currentClick.coordinates[1]]="BurlyWood";
										$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]=$scope.colour1.store;
										$scope.currentState="rallyx";
										$scope.prevState="rallyy";
										$scope.currentClick=$scope.prevClick;
										//enable+MC all squares!=prevClick, enable LC y side,disable LC x side disable prevClick square+LC+MC
										for(var i=0;i<8;i++)
											{
												for(var j=0;j<6;j++)
													{
														if(i!=$scope.prevClick.coordinates[0]||j!=$scope.prevClick.coordinates[1])
															{
																$scope.disable.middleClickSquare[i][j]=false;
																$scope.disable.square[i][j]=false;
																if(($scope.serviceSquare[0]>3&&i<=3)||($scope.serviceSquare[0]<=3&&i>3))//if i is on y side enable LC
																	{
																		$scope.disable.leftClickSquare[i][j]=false;
																	}
																else//if i is on x side disable LC
																	{
																		$scope.disable.leftClickSquare[i][j]=true;
																	}
															}
														else
															{
																$scope.disable.square[i][j]=true;
																$scope.disable.leftClickSquare[i][j]=true;
																$scope.disable.middleClickSquare[i][j]=true;
															}
													}
											}
										//enable all outs
										for(var i=0;i<$scope.disable.out.length;i++)
											{
												$scope.disable.out[i]=false;
											}
										//enable net
										$scope.disable.net=false;
										$scope.disable.resetPoint=false;
										$scope.disable.forcedError=true;
										$scope.disable.unforcedError=true;
										$scope.disable.winner=true;
										$scope.colour1.forcedError="gray";
										$scope.colour1.unforcedError="gray";
										$scope.colour1.winner="gray";
										$scope.value.forcedError="garbage";
										$scope.value.unforcedError="garbage";
										$scope.value.winner="garbage";
									break;
								case "rallyy":$scope.tempVar="middle Click rallyy";
										if(($scope.prevClick.coordinates[0]>3&&$scope.serviceSquare[0]>3)||($scope.prevClick.coordinates[0]<=3&&$scope.serviceSquare[0]<=3))//if prevClick side==service side then current rallyy wasnt pushed
										{
											$scope.prevClick=$scope.currentClick;
											$scope.prevState=$scope.currentState;
											$scope.colour1.store=$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]];//storing for backpeddling reasons
											if(!$scope.distinction)
											{
												var temp=angular.equals($scope.colour1.store,"red")?"above":"below";
											}
										else
											{
												var temp=angular.equals($scope.colour1.distinction,"red")?"above":"below";
											}
											var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;
											if($scope.serviceSquare[0]>3)//Service Player 2 so rallyx corresponds to Player 2
												{
													$scope.data.push({entry:"rally: Player 2 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});
												}
											else//Service Player 1 so rallyx corresponds to Player 1
												{
													$scope.data.push({entry:"rally: Player 1 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});
												}
											$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
											rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
											$scope.displayRally.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
											rally.strokes.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
										}
										$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="BurlyWood";
										$scope.colour2.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="green";
										$scope.colour3.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="red";
										$scope.currentClick={element:"square",coordinates:x,mousebutton:"middle"};	
										$scope.currentState="Y";//this is the "error" state reached after "rallyy"
										$scope.colour1.square[$scope.currentClick.coordinates[0]][$scope.currentClick.coordinates[1]]="gray";
										//disable all squares!=x disable LC all squares, enable MC=x
										for(var i=0;i<8;i++)
											{
												for(var j=0;j<6;j++)
													{
														$scope.disable.leftClickSquare[i][j]=true;
														if(i!=$scope.currentClick.coordinates[0]||j!=$scope.currentClick.coordinates[1])
															{
																$scope.disable.square[i][j]=true;
															}
														else
															{
																$scope.disable.square[i][j]=false;
																$scope.disable.middleClickSquare[i][j]=false;
															}
													}
											}
										//disable all outs
										for(var i=0;i<$scope.disable.out.length;i++)
											{
												$scope.disable.out[i]=true;
											}
										$scope.disable.net=true;
										$scope.disable.resetPoint=false;
										$scope.disable.forcedError=false;
										$scope.disable.unforcedError=false;
										$scope.disable.winner=false;
										$scope.colour1.forcedError="black";
										$scope.colour1.unforcedError="black";
										$scope.colour1.winner="black";
										$scope.value.forcedError="garbage";
										$scope.value.unforcedError="garbage";
										$scope.value.winner="garbage";
									break;
								case "Y"://can only be toggling a grey element
										$scope.colour1.square[$scope.currentClick.coordinates[0]][$scope.currentClick.coordinates[1]]="BurlyWood";
										$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]=$scope.colour1.store;//backpeddling colour
										$scope.currentState="rallyy";
										$scope.currentClick=$scope.prevClick;
										$scope.prevState="rallyx";
										//enable+MC all squares!=prevClick, disable LC y side,enable LC x side disable prevClick square+LC+MC
										for(var i=0;i<8;i++)
											{
												for(var j=0;j<6;j++)
													{
														if(i!=$scope.prevClick.coordinates[0]||j!=$scope.prevClick.coordinates[1])
															{
																$scope.disable.middleClickSquare[i][j]=false;
																$scope.disable.square[i][j]=false;
																if(($scope.serviceSquare[0]>3&&i<=3)||($scope.serviceSquare[0]<=3&&i>3))//if i is on y side disable LC
																	{
																		$scope.disable.leftClickSquare[i][j]=true;
																	}
																else//if i is on x side enable LC
																	{
																		$scope.disable.leftClickSquare[i][j]=false;
																	}
															}
														else
															{
																$scope.disable.square[i][j]=true;
																$scope.disable.leftClickSquare[i][j]=true;
																$scope.disable.middleClickSquare[i][j]=false;
															}
													}
											}
										//enable all outs
										for(var i=0;i<$scope.disable.out.length;i++)
											{
												$scope.disable.out[i]=false;
											}
										//enable net
										$scope.disable.net=false;
										$scope.disable.resetPoint=false;
										$scope.disable.forcedError=true;
										$scope.disable.unforcedError=true;
										$scope.disable.winner=true;
										$scope.colour1.forcedError="gray";
										$scope.colour1.unforcedError="gray";
										$scope.colour1.winner="gray";
										$scope.value.forcedError="garbage";
										$scope.value.unforcedError="garbage";
										$scope.value.winner="garbage";
									break;

								default:
							}
					}
				else//backhand/out distinction waala middle click
					{
						if(angular.equals($scope.colour1.square[x[0]][x[1]],"gray"))
							{
								$scope.distinction=false;
								$scope.colour1.square[x[0]][x[1]]=$scope.colour1.distinction;
							}
						else
							{
								$scope.distinction=true;
								$scope.colour1.distinction=$scope.colour1.square[x[0]][x[1]];
								$scope.colour1.square[x[0]][x[1]]="gray";
							}

					}
			}
		
	};
$scope.middleClickOut=function(x)
	{
		switch($scope.currentState)
			{
				case "Service!":
					if($scope.pushInd==1)
						{
								var temp=angular.equals($scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]],"red")?"Backhand":"Forehand";var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;
											if($scope.serviceSquare[0]>3)	
												{
													$scope.data.push({entry:"service: Player 2 square: "+$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1)});
													rally.servedBy=$scope.player2ID;
												}
											else
												{
													$scope.data.push({entry:"service: Player 1 square:"+$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1)});
													rally.servedBy=$scope.player1ID;											
												}
								$scope.displayRally.push({"from":$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1),"to":"","condition":temp,"distinction":distinction});
								rally.strokes.push({"from":$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1),"to":"","condition":temp,"distinction":distinction});
								$scope.colour1.store=$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]];
								$scope.pushInd=0;
								$scope.prevClick=$scope.currentClick;
								$scope.prevState=$scope.currentState;
						}
					$scope.currentClick={element:"out",coordinates:x,mousebutton:"middle"};
					$scope.colour1.store=$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]];$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]="BurlyWood";
					$scope.colour1.out[x]="gray";
					for(var i=0;i<$scope.disable.out.length;i++)//disabling all outs!=x
						{
							if(i!=x)
								{
									$scope.disable.out[i]=true;
								}
						}
					for(var i=0;i<$scope.disable.square.length;i++)//disabling all squares
						{
							for(var j=0;j<=5;j++)
								{
									$scope.disable.square[i][j]=true;
								}
						}
					$scope.disable.net=true;
					$scope.currentState="ServiceError";
					$scope.disable.forcedError=true;
					$scope.disable.unforcedError=true;
					$scope.disable.winnerPoint=false;
					$scope.colour1.forcedError="gray";
					$scope.colour1.unforcedError="gray";
					$scope.colour1.winner="gray";
					$scope.value.forcedError=false;
					$scope.value.unforcedError=true;
					$scope.value.winner=false;
					break;
				case "ServiceError"://backpeddling on out click, going to "Service!" state
					$scope.colour1.out[x]="white";
					$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]=$scope.colour1.store;//every time I leave the "Service!" state and enter another state it feeds, I will toggle the colour of the Service square to BurlyWood
					for(var i=0;i<$scope.disable.out.length;i++)//enabling all outs
						{
							$scope.disable.out[i]=false;
						}
					for(var i=0;i<$scope.disable.square.length;i++)//enabling all squares save the service square
						{
							for(var j=0;j<=5;j++)
								{
									if(i!=$scope.serviceSquare[0]||j!=$scope.serviceSquare[1])
										{$scope.disable.square[i][j]=false;}
								}
						}
					$scope.disable.net=false;
					$scope.currentState="Service!";
					$scope.disable.forcedError=true;
					$scope.disable.unforcedError=true;
					$scope.colour1.forcedError="gray";
					$scope.colour1.unforcedError="gray";
					$scope.colour1.winner="gray";
					$scope.value.forcedError="garbage";
					$scope.value.unforcedError="garbage";
					$scope.disable.winnerPoint=true;
					$scope.value.forcedError=false;
					$scope.value.unforcedError=false;
					$scope.value.winner=false;
					break;
				case "rallyx":
					if(($scope.prevClick.coordinates[0]>3&&$scope.serviceSquare[0]<=3)||($scope.prevClick.coordinates[0]<=3&&$scope.serviceSquare[0]>3))//if prevclick is not on service side then the rallyx hasn't been pushed yet
					{
						$scope.prevClick=$scope.currentClick;
						$scope.colour1.store=$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]];
						if(!$scope.distinction)
								{
									var temp=angular.equals($scope.colour1.store,"red")?"above":"below";
								}
						else
								{
									var temp=angular.equals($scope.colour1.distinction,"red")?"above":"below";
								}
						var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;
						if($scope.serviceSquare[0]>3)//Player 2 is on service side	
							{$scope.data.push({entry:"rally: Player 2 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});}
						else//Player 1 is on service side
							{$scope.data.push({entry:"rally: Player 1 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});}
						$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
						rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
						$scope.displayRally.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
						rally.strokes.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
						$scope.prevState=$scope.currentState;
					}
					$scope.currentClick={element:"out",coordinates:x,mousebutton:"middle"};
					$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="BurlyWood";
					$scope.colour2.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="green";
					$scope.colour3.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="red";
					$scope.currentState="X";
					$scope.colour1.out[x]="gray";
					for(var i=0;i<$scope.disable.out.length;i++)//disabling all outs!=x
						{
							if(i!=x)
								{
									$scope.disable.out[i]=true;
								}
						}
					for(var i=0;i<$scope.disable.square.length;i++)//disabling all squares
						{
							for(var j=0;j<=5;j++)
								{
									$scope.disable.square[i][j]=true;
								}
						}
					$scope.disable.net=true;
					$scope.disable.forcedError=false;
					$scope.disable.unforcedError=false;
					$scope.disable.winner=false;
					$scope.colour1.forcedError="black";
					$scope.colour1.unforcedError="black";
					$scope.colour1.winner="black";
					$scope.value.forcedError="garbage";
					$scope.value.unforcedError="garbage";
					$scope.value.winner="garbage";
					break;
				case "X"://backpeddling on out click
					$scope.colour1.out[x]="white";
					$scope.currentState="rallyx";
					$scope.prevState="rallyy";
					$scope.currentClick=$scope.prevClick;
					$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]=$scope.colour1.store;
					for(var i=0;i<$scope.disable.out.length;i++)//enabling all outs
						{
							$scope.disable.out[i]=false;
						}
					for(var i=0;i<$scope.disable.square.length;i++)//enabling all squares save the prevClick square, enable LC+MC+square on y side. disable LC on x side. enable MC on x side except prevClick
						{
							for(var j=0;j<=5;j++)
								{	$scope.disable.middleClickSquare[i][j]=false;
									if(i!=$scope.prevClick.coordinates[0]||j!=$scope.prevClick.coordinates[1])
										{
											$scope.disable.square[i][j]=false;
											if(($scope.prevClick.coordinates[0]>3&&i>3)||($scope.prevClick.coordinates[0]<=3&&i<=3))//if i on x(prevClick) side
												{
													$scope.disable.leftClickSquare[i][j]=true;
												}
											else//if i on y sides
												{
													$scope.disable.leftClickSquare[i][j]=false;
												}
										}
									else
										{$scope.disable.square[i][j]=true;$scope.disable.middleClickSquare[i][j]=true;}
								}
						}
					$scope.disable.net=false;
					$scope.disable.forcedError=true;
					$scope.disable.unforcedError=true;
					$scope.disable.winner=true;
					$scope.colour1.forcedError="gray";
					$scope.colour1.unforcedError="gray";
					$scope.colour1.winner="gray";
					$scope.value.forcedError="garbage";
					$scope.value.unforcedError="garbage";
					$scope.value.winner="garbage";
					break;
				case "rallyy":
					if(($scope.prevClick.coordinates[0]>3&&$scope.serviceSquare[0]>3)||($scope.prevClick.coordinates[0]<=3&&$scope.serviceSquare[0]<=3))//if prevclick is on service side then the rallyy hasn't been pushed yet
					{
						$scope.prevClick=$scope.currentClick;
						$scope.colour1.store=$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]];
						if(!$scope.distinction)
								{
									var temp=angular.equals($scope.colour1.store,"red")?"above":"below";
								}
						else
								{
									var temp=angular.equals($scope.colour1.distinction,"red")?"above":"below";
								}
						var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;
						if($scope.serviceSquare[0]>3)//Player 2 is on service side	
							{$scope.data.push({entry:"rally: Player 1 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});}
						else//Player 1 is on service side
							{$scope.data.push({entry:"rally: Player 2 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});}
						$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
						rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
						$scope.displayRally.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
						rally.strokes.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
						$scope.prevState=$scope.currentState;
					}	
					$scope.currentClick={element:"out",coordinates:x,mousebutton:"middle"};
					$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="BurlyWood";
					$scope.colour2.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="green";
					$scope.colour3.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="red";
					$scope.currentState="Y";
					$scope.colour1.out[x]="gray";
					for(var i=0;i<$scope.disable.out.length;i++)//disabling all outs!=x
						{
							if(i!=x)
								{
									$scope.disable.out[i]=true;
								}
						}
					for(var i=0;i<$scope.disable.square.length;i++)//disabling all squares
						{
							for(var j=0;j<=5;j++)
								{
									$scope.disable.square[i][j]=true;
								}
						}
					$scope.disable.net=true;
					$scope.disable.forcedError=false;
					$scope.disable.unforcedError=false;
					$scope.disable.winner=false;
					$scope.colour1.forcedError="black";
					$scope.colour1.unforcedError="black";
					$scope.colour1.winner="black";
					$scope.value.forcedError="garbage";
					$scope.value.unforcedError="garbage";
					$scope.value.winner="garbage";
					break;
				case "Y"://backpeddling on out click
					$scope.colour1.out[x]="white";
					$scope.currentState="rallyy";
					$scope.prevState="rallyx";
					$scope.currentClick=$scope.prevClick;
					$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]=$scope.colour1.store;
					for(var i=0;i<$scope.disable.out.length;i++)//enabling all outs
						{
							$scope.disable.out[i]=false;
						}
					for(var i=0;i<$scope.disable.square.length;i++)//enabling all squares save the prevClick square, enable LC+MC+square on x side. disable LC on y side. enable MC on y side except prevClick
						{
							for(var j=0;j<=5;j++)
								{	$scope.disable.middleClickSquare[i][j]=false;
									if(i!=$scope.prevClick.coordinates[0]||j!=$scope.prevClick.coordinates[1])
										{
											$scope.disable.square[i][j]=false;
											if(($scope.prevClick.coordinates[0]>3&&i>3)||($scope.prevClick.coordinates[0]<=3&&i<=3))//if i on y(prevClick) side
												{
													$scope.disable.leftClickSquare[i][j]=true;
												}
											else//if i on y sides
												{
													$scope.disable.leftClickSquare[i][j]=false;
												}
										}
									else
										{$scope.disable.square[i][j]=true;$scope.disable.middleClickSquare[i][j]=true;}
								}
						}
					$scope.disable.net=false;
					$scope.disable.forcedError=true;
					$scope.disable.unforcedError=true;
					$scope.disable.winner=true;
					$scope.colour1.forcedError="gray";
					$scope.colour1.unforcedError="gray";
					$scope.colour1.winner="gray";
					$scope.value.forcedError="garbage";
					$scope.value.unforcedError="garbage";
					$scope.value.winner="garbage";
					break;
				default:
			}
	};
$scope.middleClickNet=function()
	{
		if(angular.equals($scope.colour1.net,"white"))
			{
				switch($scope.currentState)
					{
						case "rallyx":
								if(($scope.prevClick.coordinates[0]>3&&$scope.serviceSquare[0]<=3)||($scope.prevClick.coordinates[0]<=3&&$scope.serviceSquare[0]>3))//if prevclick is not on service side then the rallyx hasn't been pushed yet
									{
										$scope.prevClick=$scope.currentClick;
										$scope.colour1.store=$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]];
										if(!$scope.distinction)
											{
												var temp=angular.equals($scope.colour1.store,"red")?"above":"below";
											}
										else
											{
												var temp=angular.equals($scope.colour1.distinction,"red")?"above":"below";
											}
										var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;
										if($scope.serviceSquare[0]>3)//Player 2 is on service side	
											{$scope.data.push({entry:"rally: Player 2 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});}
										else//Player 1 is on service side
											{$scope.data.push({entry:"rally: Player 1 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});}
										$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
										rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
										$scope.displayRally.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
										rally.strokes.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
										$scope.prevState=$scope.currentState;
									}	
								$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="BurlyWood";
								$scope.colour2.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="green";
								$scope.colour3.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="red";
								$scope.currentState="X";
							break;
						case "Service!":
								if($scope.pushInd==1)
									{
										var temp=angular.equals($scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]],"red")?"Backhand":"Forehand";var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;
											if($scope.serviceSquare[0]>3)	
												{
													$scope.data.push({entry:"service: Player 2 square: "+$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1)});
													rally.servedBy=$scope.player2ID;
												}
											else
												{
													$scope.data.push({entry:"service: Player 1 square:"+$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1)});
													rally.servedBy=$scope.player1ID;											
												}
											$scope.displayRally.push({"from":$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1),"to":"","condition":temp,"distinction":distinction});
											rally.strokes.push({"from":$scope.items[$scope.serviceSquare[0]]+""+($scope.serviceSquare[1]+1),"to":"","condition":temp,"distinction":distinction});
											$scope.colour1.store=$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]];
											$scope.pushInd=0;
											$scope.prevClick=$scope.currentClick;
											$scope.prevState=$scope.currentState;
									}
								$scope.currentClick={element:"net",coordinates:[-1,-1],mousebutton:"middle"};
								$scope.colour1.store=$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]];$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]="BurlyWood";
								$scope.currentState="ServiceError";
							break;
						case "rallyy":
								if(($scope.prevClick.coordinates[0]>3&&$scope.serviceSquare[0]>3)||($scope.prevClick.coordinates[0]<=3&&$scope.serviceSquare[0]<=3))//if prevclick is on service side then the rallyy hasn't been pushed yet
									{
										$scope.prevClick=$scope.currentClick;
										$scope.colour1.store=$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]];
										if(!$scope.distinction)
											{
												var temp=angular.equals($scope.colour1.store,"red")?"above":"below";
											}
										else
											{
												var temp=angular.equals($scope.colour1.distinction,"red")?"above":"below";
											}
										var distinction=(!$scope.distinction?"defHand":"altHand");$scope.distinction=false;
										if($scope.serviceSquare[0]>3)//Player 2 is on service side	
											{$scope.data.push({entry:"rally: Player 1 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});}
										else//Player 1 is on service side
											{$scope.data.push({entry:"rally: Player 2 square: "+$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1)+" "+temp});}
										$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
										rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
										$scope.displayRally.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
										rally.strokes.push({"from":$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1),"to":"","condition":temp,"distinction":distinction});
										$scope.prevState=$scope.currentState;
									}	
								$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="BurlyWood";
								$scope.colour2.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="green";
								$scope.colour3.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]="red";
								$scope.currentState="Y";
							break;
						default:
					}
				$scope.colour1.net="gray";
				$scope.disable.net=false;
				for(var i=0;i<$scope.disable.out.length;i++)
					{
						$scope.disable.out[i]=true;
					}
				for(var i=0;i<$scope.disable.square.length;i++)
					{
						for(var j=0;j<$scope.disable.square[0].length;j++)
							{
								$scope.disable.square[i][j]=true;
							}
					}
				$scope.disable.resetPoint=false;
				$scope.disable.forcedError=false;
				$scope.disable.unforcedError=false;
				$scope.disable.winner=false;
				$scope.value.forcedError="garbage";
				$scope.value.unforcedError="garbage";
				$scope.value.winner="garbage";
				$scope.colour1.forcedError="black";
				$scope.colour1.unforcedError="black";
				$scope.colour1.winner="black";
				$scope.currentClick={element:"net",coordinates:[-1,-1],button:"middle"};
			}
		else
			{//toggling net back to white
				switch($scope.currentState)
					{
						case "X"://backpeddling on out click
							$scope.colour1.net="white";
							$scope.currentState="rallyx";
							$scope.prevState="rallyy";
							$scope.currentClick=$scope.prevClick;
							$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]=$scope.colour1.store;
							for(var i=0;i<$scope.disable.out.length;i++)//enabling all outs
								{
									$scope.disable.out[i]=false;
								}
							for(var i=0;i<$scope.disable.square.length;i++)//enabling all squares save the prevClick square, enable LC+MC+square on y side. disable LC on x side. enable MC on x side except prevClick
								{
									for(var j=0;j<=5;j++)
										{	$scope.disable.middleClickSquare[i][j]=false;
											if(i!=$scope.prevClick.coordinates[0]||j!=$scope.prevClick.coordinates[1])
												{
													$scope.disable.square[i][j]=false;
													if(($scope.prevClick.coordinates[0]>3&&i>3)||($scope.prevClick.coordinates[0]<=3&&i<=3))//if i on x(prevClick) side
														{
															$scope.disable.leftClickSquare[i][j]=true;
														}
													else//if i on y sides
														{
															$scope.disable.leftClickSquare[i][j]=false;
														}
												}
											else	
												{$scope.disable.square[i][j]=true;$scope.disable.middleClickSquare[i][j]=true;}
										}
								}
							$scope.disable.net=false;
							$scope.disable.forcedError=true;
							$scope.disable.unforcedError=true;
							$scope.disable.winner=true;
							$scope.colour1.forcedError="gray";
							$scope.colour1.unforcedError="gray";
							$scope.colour1.winner="gray";
							$scope.value.forcedError="garbage";
							$scope.value.unforcedError="garbage";
							break;
						case "ServiceError"://backpeddling on out click, going to "Service!" state
							$scope.colour1.net="white";
							$scope.colour1.square[$scope.serviceSquare[0]][$scope.serviceSquare[1]]=$scope.colour1.store;//every time I leave the "Service!" state and enter another state it feeds, I will toggle the colour of the Service square to BurlyWood
							for(var i=0;i<$scope.disable.out.length;i++)//enabling all outs
								{
									$scope.disable.out[i]=false;
								}
							for(var i=0;i<$scope.disable.square.length;i++)//enabling all squares save the service square
								{
									for(var j=0;j<=5;j++)
										{
											if(i!=$scope.serviceSquare[0]||j!=$scope.serviceSquare[1])
												{$scope.disable.square[i][j]=false;}
										}
								}
							$scope.disable.net=false;
							$scope.currentState="Service!";
							$scope.disable.forcedError=true;
							$scope.disable.unforcedError=true;
							$scope.disable.winner=true;
							$scope.value.forcedError="garbage";
							$scope.value.unforcedError="garbage";
							break;
						case "Y"://backpeddling on net click
							$scope.colour1.net="white";
							$scope.currentState="rallyy";
							$scope.prevState="rallyx";
							$scope.currentClick=$scope.prevClick;
							$scope.colour1.square[$scope.prevClick.coordinates[0]][$scope.prevClick.coordinates[1]]=$scope.colour1.store;
							for(var i=0;i<$scope.disable.out.length;i++)//enabling all outs
								{
									$scope.disable.out[i]=false;
								}
							for(var i=0;i<$scope.disable.square.length;i++)//enabling all squares save the prevClick square, enable LC+MC+square on x side. disable LC on y side. enable MC on y side except prevClick
								{
									for(var j=0;j<=5;j++)
										{	$scope.disable.middleClickSquare[i][j]=false;
											if(i!=$scope.prevClick.coordinates[0]||j!=$scope.prevClick.coordinates[1])
												{
													$scope.disable.square[i][j]=false;
													if(($scope.prevClick.coordinates[0]>3&&i>3)||($scope.prevClick.coordinates[0]<=3&&i<=3))//if i on y(prevClick) side
														{
															$scope.disable.leftClickSquare[i][j]=true;
														}
													else//if i on y sides
														{
															$scope.disable.leftClickSquare[i][j]=false;
														}
												}
											else
												{$scope.disable.square[i][j]=true;$scope.disable.middleClickSquare[i][j]=true;}
										}	
								}
							$scope.disable.net=false;
							$scope.disable.forcedError=true;
							$scope.disable.unforcedError=true;
							$scope.disable.winner=true;
							$scope.colour1.forcedError="gray";
							$scope.colour1.unforcedError="gray";
							$scope.colour1.winner="gray"
							$scope.value.forcedError="garbage";
							$scope.value.unforcedError="garbage";
							$scope.value.winner="garbage";
							break;
						default:
					}
			}
	};
$scope.leftClickunforcedError=function()
	{
		if(!angular.equals($scope.value.unforcedError,true))
			{
				$scope.disable.winnerPoint=false;
				$scope.disable.forcedError=true;
				$scope.disable.unforcedError=false;
				$scope.disable.winner=true;
				$scope.colour1.forcedError="gray";
				$scope.colour1.unforcedError="black";
				$scope.colour1.winner="gray";
			}
		if(angular.equals($scope.value.unforcedError,true))
			{
				$scope.disable.winnerPoint=true;
				$scope.disable.forcedError=false;
				$scope.disable.winner=false;
				$scope.colour1.forcedError="black";
				$scope.disable.unforcedError=false;
				$scope.colour1.unforcedError="black";
				$scope.colour1.winner="black";
			}
	};
$scope.leftClickforcedError=function()
	{
		if(!angular.equals($scope.value.forcedError,true))
			{
				$scope.disable.winnerPoint=false;
				$scope.disable.unforcedError=true;
				$scope.disable.winner=true;
				$scope.disable.forcedError=false;
				$scope.colour1.unforcedError="gray";
				$scope.colour1.winner="gray";
				$scope.colour1.forcedError="black";
				rally.forced
			}
		if(angular.equals($scope.value.forcedError,true))
			{
				$scope.disable.winnerPoint=true;
				$scope.disable.unforcedError=false;
				$scope.disable.winner=false;
				$scope.colour1.unforcedError="black";
				$scope.colour1.winner="black";
				$scope.disable.forcedError=false;
				$scope.colour1.forcedError="black";
			}		
	};
$scope.leftClickwinner=function()
	{
		if(!angular.equals($scope.value.winner,true))
			{
				$scope.disable.winnerPoint=false;
				$scope.disable.unforcedError=true;
				$scope.disable.forcedError=true;
				$scope.disable.winner=false;
				$scope.colour1.unforcedError="gray";
				$scope.colour1.forcedError="gray";
				$scope.colour1.winner="black";
			}
		if(angular.equals($scope.value.winner,true))
			{
				$scope.disable.winnerPoint=true;
				$scope.disable.forcedError=false;
				$scope.disable.unforcedError=false;
				$scope.disable.winner=false;
				$scope.colour1.unforcedError="black";
				$scope.colour1.forcedError="black";
				$scope.colour1.winner="black";
			}		
	};
$scope.leftClickwinnerPoint=function()
	{
	document.getElementById("demo").innerHTML = rally.strokes[0].from;
	$scope.tempVar="winnerPoint";
	$scope.disable.resetPoint=true;
	if($scope.serviceSquare[0]<=3)//Player 1 is the X side, i.e. the server
		{
			switch($scope.currentState)
				{
					case "X"://player 1 was the last to catch the shuttle
						switch($scope.currentClick.element)
							{
								case "net":$scope.displayRally[$scope.displayRally.length-1].to="NET";
								//rally.strokes[rally.strokes.length-1].to=$scope.displayRally[$scope.displayRally.length-1].to; 
									switch($scope.value.unforcedError)
										{
											case true: $scope.data.push({entry:"Player 1 Hits it to the Net! UnforcedError"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
												//$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
												//rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
												$scope.gameEnd="Net UNFORCED_ERROR";
												rally.winType="UNFORCED_ERROR";
												break;
											default:
										}
									switch($scope.value.forcedError)
										{
											case true:$scope.data.push({entry:"Player 1 Hits it to the Net! FORCED_ERROR"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
											//$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
											//rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
												$scope.gameEnd="Net FORCED_ERROR";
												rally.winType="FORCED_ERROR";
												break;											
											default:
										}
									switch($scope.value.winner)
										{
											case true:$scope.data.push({entry:"Player 1 Hits it to the Net! Winner"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
												//$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
												//rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
												$scope.gameEnd="Net Winner";
												rally.winType="WINNER";
												break;											
											default:
										}
										//$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
										//rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.prevClick.coordinates[0]]+""+($scope.prevClick.coordinates[1]+1);
									rally.errorType="NET";
									rally.wonBy=$scope.player2ID;
										break;
								case "square":$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1); 
								//rally.strokes[rally.strokes.length-1].to=$scope.displayRally[$scope.displayRally.length-1].to;
									if($scope.currentClick.coordinates[1]==0||$scope.currentClick.coordinates[1]==5)//player1 hits it out
										{
											switch($scope.value.unforcedError)
												{
													case true: $scope.data.push({entry:"Player 1 Hits it out! An UNFORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+"UNFORCED_ERROR";
													rally.winType="UNFORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.forcedError)
												{
													case true:$scope.data.push({entry:"Player 1 Hits it out! A FORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+"FORCED_ERROR";
													rally.winType="FORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.winner)
												{
													case true:$scope.data.push({entry:"Player 1 Hits it out! A Winner by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+"WINNER";
													rally.winType="WINNER";
														break;
													default:
												}
										rally.wonBy=$scope.player2ID;
										}
									else if(($scope.currentClick.coordinates[0]>3&&$scope.prevClick.coordinates[0]>3)||($scope.currentClick.coordinates[0]<=3&&$scope.prevClick.coordinates[0]<=3))//player 1 hits on same side court
										{
											switch($scope.value.unforcedError)
												{
													case true: $scope.data.push({entry:"Shuttle lands on same side court! UNFORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
														$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+"UNFORCED_ERROR";
														rally.winType="UNFORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.forcedError)
												{
													case true:$scope.data.push({entry:"Shuttle lands on same side court! FORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
														$scope.gameEnd="out"+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+"FORCED_ERROR";
														rally.winType="FORCED_ERROR";
														break;
													default:
													}
											switch($scope.value.winner)
												{
													case true:$scope.data.push({entry:"Shuttle lands on same side court! Winner by Player 1"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
														$scope.gameEnd="out"+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+"WINNER";
														rally.winType="WINNER";
														break;
													default:
												}
										rally.wonBy=$scope.player2ID;
										}	
									else//shuttle dropped by player 2
										{
											switch($scope.value.unforcedError)
												{
													case true: $scope.data.push({entry:"Player 2 fails to get the shuttle! UNFORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 1 wins the point"});$scope.point[0]++;
														$scope.gameEnd="dropped "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+"UNFORCED_ERROR";
														rally.winType="UNFORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.forcedError)
												{
													case true:$scope.data.push({entry:"Player 2 fails to get the shuttle! FORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 1 wins the point"});$scope.point[0]++;
														$scope.gameEnd="dropped "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+"FORCED_ERROR";
														rally.winType="FORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.winner)
												{
													case true:$scope.data.push({entry:"Player 2 fails to get the shuttle! Winner by Player 1"});$scope.data.push({entry:"Player 1 wins the point"});$scope.point[0]++;
														$scope.gameEnd="dropped "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+"WINNER";
														rally.winType="WINNER";
														break;
													default:
												}
										rally.wonBy=$scope.player1ID;
										}
									rally.errorType="IN";
									break;
								case "out":$scope.displayRally[$scope.displayRally.length-1].to="OUT"+$scope.currentClick.coordinates; 
													//rally.strokes[rally.strokes.length-1].to=$scope.displayRally[$scope.displayRally.length-1].to;
									switch($scope.value.unforcedError)
										{
											case true: $scope.data.push({entry:"Player 1 Hits it out! An UNFORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.currentClick.coordinates+"UNFORCED_ERROR";
													rally.winType="UNFORCED_ERROR";
												break;
											default:
										}
									switch($scope.value.forcedError)
										{
											case true:$scope.data.push({entry:"Player 1 Hits it out! A FORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.currentClick.coordinates+"FORCED_ERROR";
													rally.winType="FORCED_ERROR";
												break;
											default:
										}
									switch($scope.value.winner)
										{
											case true:$scope.data.push({entry:"Player 1 Hits it out! A Winner by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.currentClick.coordinates+"WINNER";
													rally.winType="WINNER";
												break;
											default:
										}
									rally.wonBy=$scope.player2ID;
									rally.errorType="OUT";
									break;
								default:
							}
						break;
					case "Y"://player 2 was the last one to catch the shuttle
						switch($scope.currentClick.element)
							{
								case "net":$scope.displayRally[$scope.displayRally.length-1].to="NET";
								//rally.strokes[rally.strokes.length-1].to=$scope.displayRally[$scope.displayRally.length-1].to; 
									switch($scope.value.unforcedError)
										{
											case true: $scope.data.push({entry:"Player 2 Hits it to the Net! UNFORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
												$scope.gameEnd="Net UNFORCED_ERROR";
												rally.winType="UNFORCED_ERROR";
												break;
											default:
										}
									switch($scope.value.forcedError)
										{
											case true:$scope.data.push({entry:"Player 2 Hits it to the Net! FORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
												$scope.gameEnd="Net FORCED_ERROR";
												rally.winType="FORCED_ERROR";
												break;
											default:
										}
									switch($scope.value.winner)
										{
											case true:$scope.data.push({entry:"Player 2 Hits it to the Net! Winner by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
												$scope.gameEnd="Net Winner";
												rally.winType="WINNER";
												break;
											default:
										}
									rally.wonBy=$scope.player1ID;
									rally.errorType="NET";
									break;
								case "square":$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1); 
								//rally.strokes[rally.strokes.length-1].to=$scope.displayRally[$scope.displayRally.length-1].to; 
									if($scope.currentClick.coordinates[1]==0||$scope.currentClick.coordinates[1]==5)//player2 hit it out
										{
											switch($scope.value.unforcedError)
												{
													case true: $scope.data.push({entry:"Player 2 Hits it out! UNFORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Unforced";
													rally.winType="UNFORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.forcedError)
												{
													case true:$scope.data.push({entry:"Player 2 Hits it out! FORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Forced";
														rally.winType="FORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.winner)
												{
													case true:$scope.data.push({entry:"Player 2 Hits it out! Winner by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Winner";
													rally.winType="WINNER";
														break;
													default:
												}
										rally.wonBy=$scope.player1ID;
										}
									else if(($scope.currentClick.coordinates[0]>3&&$scope.prevClick.coordinates[0]>3)||($scope.currentClick.coordinates[0]<=3&&$scope.prevClick.coordinates[0]<=3))//player 2 hits it to same side of court
										{
											switch($scope.value.unforcedError)
												{
													case true: $scope.data.push({entry:"Shuttle lands on same-side court! UNFORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Unforced";
													rally.winType="UNFORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.forcedError)
												{
													case true: $scope.data.push({entry:"Shuttle lands on same-side court! FORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Forced";
														rally.winType="FORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.winner)
												{
													case true: $scope.data.push({entry:"Shuttle lands on same-side court! Winner by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Winner";
													rally.winType="WINNER";
														break;
													default:
												}
										rally.wonBy=$scope.player1ID;
										}
									else//shuttle dropped by receiver, i.e. player 1
										{
											switch($scope.value.unforcedError)
												{
													case true: $scope.data.push({entry:"Player 1 drops the shuttle! UNFORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="dropped "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Unforced";
													rally.winType="UNFORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.forcedError)
												{
													case true:$scope.data.push({entry:"Player 1 drops the shuttle! FORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="dropped "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Forced";
														rally.winType="FORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.winner)
												{
													case true:$scope.data.push({entry:"Player 1 drops the shuttle! Winner by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="dropped "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Winner";
													rally.winType="WINNER";
														break;
													default:
												}
										rally.wonBy=$scope.player1ID;
										}
									rally.errorType="IN";
									break;
								case "out":$scope.displayRally[$scope.displayRally.length-1].to="OUT";
								//rally.strokes[rally.strokes.length-1].to=$scope.displayRally[$scope.displayRally.length-1].to;
									switch($scope.value.unforcedError)
										{
											case true: $scope.data.push({entry:"Player 2 Hits it out! UNFORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
												$scope.gameEnd="out "+$scope.currentClick.coordinates+" Unforced";
												rally.winType="UNFORCED_ERROR";
												break;
											default:
										}
									switch($scope.value.forcedError)
										{
											case true:$scope.data.push({entry:"Player 2 Hits it out! FORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
												$scope.gameEnd="out "+$scope.currentClick.coordinates+"Forced";
												rally.winType="FORCED_ERROR";
												break;
											default:
										}
									switch($scope.value.winner)
											{
												case true:$scope.data.push({entry:"Player 2 Hits it out! Winner by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.currentClick.coordinates+" Winner";
													rally.winType="WINNER";
													break;
												default:
											}
									rally.wonBy=$scope.player1ID;
									rally.errorType="OUT";
									break;
								default:
							}
						break;
					case "ServiceError":
							switch($scope.currentClick.element)
								{
									case "square":$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1); 
											$scope.gameEnd="Service Error "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Unforced";
											rally.errorType="IN";
										break;
									case "net":$scope.displayRally[$scope.displayRally.length-1].to="NET"; 
											$scope.gameEnd="Service Error net Unforced";
											rally.errorType="NET";
										break;
									case "out":$scope.displayRally[$scope.displayRally.length-1].to="OUT"+$scope.currentClick.coordinates; 
										$scope.gameEnd="Service Error out "+$scope.currentClick.coordinates+" Unforced";
										rally.errorType="OUT";
										break;
									default:
								}
							rally.strokes[rally.strokes.length-1].to=$scope.displayRally[$scope.displayRally.length-1].to;	
							$scope.data.push({entry:"Player 1 Illegal Service! UNFORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
							rally.winType="UNFORCED_ERROR";
							rally.wonBy=$scope.player2ID;
						break;
					case "GreatService":
							switch($scope.currentClick.element)
								{
									case "square":$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1); 
											rally.strokes[rally.strokes.length-1].to=$scope.displayRally[$scope.displayRally.length-1].to;
											$scope.gameEnd="ACE "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Winner";
											rally.errorType="IN";
										break;
									default:
							}
							$scope.data.push({entry:"Player 1 ACE!! WINNER by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
							rally.winType="WINNER";
							rally.wonBy=$scope.player1ID;
						break;
				}
		}
	else//Player 2 serves, i.e. is player 2 is the X side
		{
			switch($scope.currentState)
				{
					case "X"://player 2 was last to catch the shuttle
						switch($scope.currentClick.element)
							{
								case "net":$scope.displayRally[$scope.displayRally.length-1].to="NET";
								 
									switch($scope.value.unforcedError)
										{
											case true: $scope.data.push({entry:"Player 2 Hits it to the Net! UNFORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
												$scope.gameEnd="Net UNFORCED_ERROR";
												rally.winType="UNFORCED_ERROR";
												break;
											default:
										}
									switch($scope.value.forcedError)
										{
											case true:$scope.data.push({entry:"Player 2 Hits it to the Net! FORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
												$scope.gameEnd="Net FORCED_ERROR";
												rally.winType="FORCED_ERROR";
												break;
											default:
										}
									switch($scope.value.winner)
										{
											case true:$scope.data.push({entry:"Player 2 Hits it to the Net! Winner by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
												$scope.gameEnd="Net Winner";
												rally.winType="WINNER";
												break;
											default:
										}
										rally.wonBy=$scope.player1ID;
										rally.errorType="NET";
										break;
								case "square":
								$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1);
									if($scope.currentClick.coordinates[1]==0||$scope.currentClick.coordinates[1]==5)//player2 hits it out
										{
											switch($scope.value.unforcedError)
												{
													case true: $scope.data.push({entry:"Player 2 Hits it out! UNFORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Unforced";
													rally.winType="UNFORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.forcedError)
												{
													case true:$scope.data.push({entry:"Player 2 Hits it out! FORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Forced";
													rally.winType="FORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.winner)
												{
													case true:$scope.data.push({entry:"Player 2 Hits it out! Winner by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Winner";
													rally.winType="WINNER";
														break;
													default:
												}
										rally.wonBy=$scope.player1ID;
										}
									else if(($scope.currentClick.coordinates[0]>3&&$scope.prevClick.coordinates[0]>3)||($scope.currentClick.coordinates[0]<=3&&$scope.prevClick.coordinates[0]<=3))//player2 hits in same side court
										{
											switch($scope.value.unforcedError)
												{
													case true: $scope.data.push({entry:"Shuttle lands on same side court! UNFORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Unforced";
													rally.winType="UNFORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.forcedError)
												{
													case true:$scope.data.push({entry:"Shuttle lands on same side court! FORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Forced";
													rally.winType="FORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.winner)
												{
													case true:$scope.data.push({entry:"Shuttle lands on same side court! Winner by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Winner";
													rally.winType="WINNER";
														break;
													default:
												}
										rally.wonBy=$scope.player1ID;
										}	
									else//shuttle dropped by player 1
										{
											switch($scope.value.unforcedError)
												{
													case true: $scope.data.push({entry:"Player 1 fails to catch the shuttle! An UNFORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 2 wins the point"});$scope.point[1]++;
													$scope.gameEnd="dropped "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Unforced";
													rally.winType="UNFORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.forcedError)
												{
													case true:$scope.data.push({entry:"Player 1 fails to catch the shuttle! A FORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 2 wins the point"});$scope.point[1]++;
													$scope.gameEnd="dropped "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Forced";
													rally.winType="FORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.winner)
												{
													case true:$scope.data.push({entry:"Player 1 fails to catch the shuttle! A Winner by Player 2"});$scope.data.push({entry:"Player 2 wins the point"});$scope.point[1]++;
													$scope.gameEnd="dropped "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Winner";
													rally.winType="WINNER";
														break;
													default:
												}
										rally.wonBy=$scope.player2ID;
										}
										rally.errorType="IN";
									break;
								case "out":$scope.displayRally[$scope.displayRally.length-1].to="OUT"+$scope.currentClick.coordinates;
								//rally.strokes[rally.strokes.length-1].to="OUT"+$scope.currentClick.coordinates;
										switch($scope.value.unforcedError)
											{
												case true: $scope.data.push({entry:"Player 2 Hits it out! An UNFORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.currentClick.coordinates+" Unforced";
													rally.winType="UNFORCED_ERROR";
													break;
												default:
											}
										switch($scope.value.forcedError)
											{
												case true:$scope.data.push({entry:"Player 2 Hits it out! A FORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.currentClick.coordinates+" Forced";
													rally.winType="FORCED_ERROR";
													break;
												default:
											}
										switch($scope.value.winner)
											{
												case true:$scope.data.push({entry:"Player 2 Hits it out! A Winner by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="out "+$scope.currentClick.coordinates+" Winner";
													rally.winType="WINNER";
													break;
												default:
											}
										rally.wonBy=$scope.player1ID;
										rally.errorType="OUT";
									break;
								default:
							}
						break;
					case "Y"://player 1 was last to catch the shuttle
						switch($scope.currentClick.element)
							{
								case "net":$scope.displayRally[$scope.displayRally.length-1].to="NET";
								//rally.strokes[rally.strokes.length-1].to="NET"; 
									switch($scope.value.unforcedError)
										{
											case true: $scope.data.push({entry:"Player 1 Hits it to the Net! An UNFORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
												$scope.gameEnd="Net UNFORCED_ERROR";
												rally.winType="UNFORCED_ERROR";
												break;
											default:
										}
									switch($scope.value.forcedError)
										{
											case true:$scope.data.push({entry:"Player 1 Hits it to the Net! A FORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
												$scope.gameEnd="Net FORCED_ERROR";
												rally.winType="FORCED_ERROR";
												break;
											default:
										}
									switch($scope.value.winner)
										{
											case true:$scope.data.push({entry:"Player 1 Hits it to the Net! A Winner by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
												$scope.gameEnd="Net Winner";
												rally.winType="WINNER";
												break;
											default:
										}
										rally.wonBy=$scope.player2ID;
										rally.errorType="NET";
									break;
								case "square":$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1); 
								//rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1); 
									if($scope.currentClick.coordinates[1]==0||$scope.currentClick.coordinates[1]==5)//player 1 hits it out
										{
											switch($scope.value.unforcedError)
												{
													case true: $scope.data.push({entry:"Player 1 Hits it out! An UNFORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Unforced";
													rally.winType="UNFORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.forcedError)
												{
													case true:$scope.data.push({entry:"Player 1 Hits it out! A FORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Forced";
													rally.winType="FORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.winner)
												{
													case true:$scope.data.push({entry:"Player 1 Hits it out! A Winner by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Winner";
													rally.winType="WINNER";
														break;
													default:
												}
										rally.wonBy=$scope.player2ID;
										}
									else if(($scope.currentClick.coordinates[0]>3&&$scope.prevClick.coordinates[0]>3)||($scope.currentClick.coordinates[0]<=3&&$scope.prevClick.coordinates[0]<=3))//player 1 hits to same side court
										{
											switch($scope.value.unforcedError)
												{
													case true: $scope.data.push({entry:"Shuttle lands on same-side court! An UNFORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Unforced";
													rally.winType="UNFORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.forcedError)
												{
													case true:$scope.data.push({entry:"Shuttle lands on same-side court! A FORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Forced";
													rally.winType="FORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.winner)
												{
													case true:$scope.data.push({entry:"Shuttle lands on same-side court! A Winner by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Winner";
													rally.winType="WINNER";
														break;
													default:
												}
										rally.wonBy=$scope.player2ID;
										}
									else//shuttle dropped by player 2
										{
											switch($scope.value.unforcedError)
												{
													case true: $scope.data.push({entry:"Player 2 fails to catch the shuttle! An UNFORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="dropped "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Unforced";
													rally.winType="UNFORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.forcedError)
												{
													case true:$scope.data.push({entry:"Player 2 fails to catch the shuttle! A FORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="dropped "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Forced";
													rally.winType="FORCED_ERROR";
														break;
													default:
												}
											switch($scope.value.winner)
												{
													case true:$scope.data.push({entry:"Player 2 fails to catch the shuttle! A Winner by Player 1"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
													$scope.gameEnd="dropped "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Winner";
													rally.winType="WINNER";
														break;
													default:
												}
										rally.wonBy=$scope.player1ID;
										}
									break;
									rally.errorType="IN";
								case "out":$scope.displayRally[$scope.displayRally.length-1].to="OUT"+$scope.currentClick.coordinates; 
								//rally.strokes[rally.strokes.length-1].to="OUT"+$scope.currentClick.coordinates;
										switch($scope.value.unforcedError)
											{
												case true: $scope.data.push({entry:"Player 1 Hits it out! An UNFORCED_ERROR by Player 1"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.currentClick.coordinates+" Unforced";
													rally.winType="UNFORCED_ERROR";
													break;
												default:
											}
										switch($scope.value.forcedError)
											{
												case true:$scope.data.push({entry:"Player 1 Hits it out! A FORCED_ERROR by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.currentClick.coordinates+" Forced";
													rally.winType="FORCED_ERROR";
													break;
												default:
											}
										switch($scope.value.winner)
											{
												case true:$scope.data.push({entry:"Player 1 Hits it out! A Winner by Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
													$scope.gameEnd="out "+$scope.currentClick.coordinates+" Winner";
													rally.winType="WINNER";
													break;
												default:
											}
										rally.wonBy=$scope.player2ID;
										rally.errorType="OUT";
									break;
								default:
							}
						break;
					case "ServiceError":
							switch($scope.currentClick.element)
								{
									case "square":$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1); 
																//rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1); 
																$scope.gameEnd="Service Error "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Unforced";
																rally.errorType="IN";
										break;
									case "net":$scope.displayRally[$scope.displayRally.length-1].to="NET"; 
														 //rally.strokes[rally.strokes.length-1].to="NET"; 
														 $scope.gameEnd="Service Error net Unforced";
														 rally.errorType="NET";
										break;
									case "out":$scope.displayRally[$scope.displayRally.length-1].to="OUT"+$scope.currentClick.coordinates; 
														 //rally.strokes[rally.strokes.length-1].to="OUT"+$scope.currentClick.coordinates; 
														 $scope.gameEnd="Service Error out "+$scope.currentClick.coordinates+" Unforced";
														 rally.errorType="OUT";
										break;
									default:
								}
							$scope.data.push({entry:"Player 2 Illegal Service! UNFORCED_ERROR Player 2"});$scope.data.push({entry:"Player 1 wins the point!"});$scope.point[0]++;
							rally.winType="UNFORCED_ERROR";
							rally.wonBy=$scope.player1ID;
						break;
					case "GreatService":
							switch($scope.currentClick.element)
								{
									case "square":$scope.displayRally[$scope.displayRally.length-1].to=$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1); 
																//rally.strokes[rally.strokes.length-1].to=$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1); 
																$scope.gameEnd="ACE "+$scope.items[$scope.currentClick.coordinates[0]]+""+($scope.currentClick.coordinates[1]+1)+" Winner";
																rally.errorType="IN";
										break;
									default:
								}
							$scope.data.push({entry:"Player 2 ACE!! WINNER Player 2"});$scope.data.push({entry:"Player 2 wins the point!"});$scope.point[1]++;
							rally.winType="WINNER";
							rally.wonBy=$scope.player2ID;
						break;
				}
		}
	rally.strokes[rally.strokes.length-1].to=$scope.displayRally[$scope.displayRally.length-1].to;
	/*$http({
		method: "POST",
		url: 'http://localhost:8080/baws/ui/point/add',
		data: rally,
		headers: {'Content-Type':'application/json','Access-Control-Allow-Origin' : '*'}
		}).then(
			function mySuccess(data,status,headers,config)
				{
					$scope.disable.newPoint=false;
					$scope.disable.winnerPoint=true;
					log.info(data);
				},
			function myFailure(data,status,headers,config)
				{
					$scope.stopWinnerPointUpdate=true;
			  	}
			 	 );*/

					//var testObject = { 'one': 1, 'two': 2, 'three': 3 };
					// Put the object into storage
					//localStorage.setItem('point'+pointNum, JSON.stringify(rally));
					//// Retrieve the object from storage
					//var retrievedObject = localStorage.getItem('point');
					//console.log('retrievedObject: ', JSON.parse(retrievedObject));
	$scope.disable.winnerPoint=true;
	if(($scope.point[0]>=21)||($scope.point[1]>=21))
					{
						if(($scope.point[0]-$scope.point[1])>=2||($scope.point[1]-$scope.point[0])>=2)
							{
								$scope.disable.winnerGame=false;
								$scope.disable.newPoint=true;
								$scope.disable.square=
										[
													[true,true,true,true,true,true],/*row H*/
													[true,true,true,true,true,true],/*row G*/
													[true,true,true,true,true,true],/*row F*/
													[true,true,true,true,true,true],/*row E*/
													[true,true,true,true,true,true],/*row D*/
													[true,true,true,true,true,true],/*row C*/
													[true,true,true,true,true,true],/*row B*/
													[true,true,true,true,true,true]/*row A*/
										];
								$scope.disable.net=true;
								$scope.disable.out=[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true];
							}
						else
							{
								$scope.disable.winnerGame=true;
								$scope.disable.newPoint=false;
							}
					}
	else
					{
							$scope.disable.winnerGame=true;
							$scope.disable.newPoint=false;
					}
	game.rallies.push(rally);
	};
$scope.leftClicknewPoint=function()
	{
		$scope.rallyNum++;
		var link = document.getElementById('downloadlink');
		$scope.leftClickresetPoint();
		link.style.display = 'none';
		if(($scope.gameNum==3)&&(($scope.point[0]==11)||($scope.point[1]==11))&$scope.thirdSetMidSwitch)
			{
				$scope.thirdSetMidSwitch=false;
				var temp=$scope.player1ID;
				$scope.player1ID=$scope.player2ID;
				$scope.player2ID=temp;
				temp=$scope.gameScore.player1;
				$scope.gameScore.player1=$scope.gameScore.player2;
				$scope.gameScore.player2=temp;
				temp=$scope.point[0];
				$scope.point[0]=$scope.point[1];
				$scope.point[1]=temp;
			}
			if($scope.point[0]>=21||$scope.point[1]>=21)
			{
					if(($scope.point[0]-$scope.point[1])>=2||($scope.point[1]-$scope.point[0])>=2)
							{
								$scope.disable.winnerGame=false;
							}
					else
							{
								$scope.disable.winnerGame=true;
							}
			}
	};
$scope.leftClickwinnerGame=function()
	{
		match.games.push(game);
		var link = document.getElementById('downloadlink');
		alert("Remember to Download Game-"+$scope.gameNum+"'s Data");
		$scope.downloadFileName="game-"+$scope.gameNum+".txt";
		(function () 
			{
							var textFile = null,
							makeTextFile = function (text) 
							{
											var data = new Blob([text], {type: 'text/plain'});
											// If we are replacing a previously generated file we need to
											// manually revoke the object URL to avoid memory leaks.
											if (textFile !== null) 
											{
												window.URL.revokeObjectURL(textFile);
											}
											textFile = window.URL.createObjectURL(data);
											return textFile;
							};
							var link = document.getElementById('downloadlink');
							link.href = makeTextFile(JSON.stringify(game));
							link.style.display = 'block';
			 })();
		//note: player 1 and player 2 should represent the scores of player1ID and player2ID always
		if($scope.point[0]>$scope.point[1])//player 1 wins the current game
			{
				$scope.gameWinners.push({"game" : $scope.gameNum,"winner" : $scope.player1ID});
				$scope.gameScore.player1++;
			}
		else//player 1 wins the current game
			{
				$scope.gameWinners.push({"game" : $scope.gameNum,"winner" : $scope.player2ID});
				$scope.gameScore.player2++;
			}
		if(($scope.gameNum<=2))
			{
				if($scope.gameScore.player1>=$scope.gameScore.player2)
					{
						if(($scope.gameScore.player1-$scope.gameScore.player2)<=1)
							{	
								$scope.disable.newGame=false;
								$scope.disable.winnerGame=true;
							}
						else
							{
								$scope.disable.newGame=true;
								$scope.disable.winnerGame=true;
								$scope.disable.endMatch=false;
							}		
					}
				else
					{
						if(($scope.gameScore.player2-$scope.gameScore.player1)<=1)
							{	
								$scope.disable.newGame=false;
								$scope.disable.winnerGame=true;
							}
						else
							{
								$scope.disable.newGame=true;
								$scope.disable.winnerGame=true;
								$scope.disable.endMatch=false;
							}		
					}
			}
	};
$scope.leftClicknewGame=function()
{
	var link = document.getElementById('downloadlink');
	$scope.leftClickresetPoint();
	$scope.gameNum++;
	$scope.rallyNum=1;
	game={"rallies":[]};
	link.style.display = 'none';
	$scope.point=[0,0];
	$scope.thirdSetMidSwitch=true;
	var temp=$scope.player1ID;
	$scope.player1ID=$scope.player2ID;
	$scope.player2ID=temp;
	temp=$scope.gameScore.player1;
	$scope.gameScore.player1=$scope.gameScore.player2;
	$scope.gameScore.player2=temp;
}
$scope.leftCickendMatch=function()
{
	var link = document.getElementById('downloadlink');
		alert("Remember to Download Match's Data");
		$scope.downloadFileName="match"+player1ID+"vs"+player2ID+".txt";
		if($scope.point[0]>=21||$scope.point[1]>=21)
			{
					if(($scope.point[0]-$scope.point[1])>=2||($scope.point[1]-$scope.point[0])>=2)
							{
								$scope.disable.winnerGame=false;
							}
					else
							{
								$scope.disable.winnerGame=true;
							}
			}
		(function () 
			{
							var textFile = null,
							makeTextFile = function (text) 
							{
											var data = new Blob([text], {type: 'text/plain'});
											// If we are replacing a previously generated file we need to
											// manually revoke the object URL to avoid memory leaks.
											if (textFile !== null) 
											{
												window.URL.revokeObjectURL(textFile);
											}
											textFile = window.URL.createObjectURL(data);
											return textFile;
							};
							var link = document.getElementById('downloadlink');
							link.href = makeTextFile(JSON.stringify(match));
							link.style.display = 'block';
			 })();
			 $scope.disable={square:[
				      [true,true,true,true,true,true],/*row H*/
				      [true,true,true,true,true,true],/*row G*/
				      [true,true,true,true,true,true],/*row F*/
				      [true,true,true,true,true,true],/*row E*/
				      [true,true,true,true,true,true],/*row D*/
				      [true,true,true,true,true,true],/*row C*/
				      [true,true,true,true,true,true],/*row B*/
				      [true,true,true,true,true,true]/*row A*/
				      ],
				net:true,
				out:[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true],
				winnerPoint:true,
				newPoint:true,
				resetPoint:true,
				newGame:true,
				winnerGame:true,
				endMatch:true,
				forcedError:true,
				unforcedError:true,
				winner:true,
				middleClickSquare:[
					      [true,true,true,true,true,true],/*row H*/
					      [true,true,true,true,true,true],/*row G*/
					      [true,true,true,true,true,true],/*row F*/
					      [true,true,true,true,true,true],/*row E*/
					      [true,true,true,true,true,true],/*row D*/
					      [true,true,true,true,true,true],/*row C*/
					      [true,true,true,true,true,true],/*row B*/
					      [true,true,true,true,true,true]/*row A*/
					    		],
				leftClickSquare:[
						[true,true,true,false,true,true],
						[true,true,true,false,true,true],
						[true,true,true,true,true,true],
						[true,true,true,true,true,true],
						[true,true,true,true,true,true],
						[true,true,true,true,true,true],
						[true,true,true,true,true,true],
						[true,true,true,true,true,true]
						]
				};
};
$scope.leftClickresetPoint=function()
	{
		rally={
			"gameId":3,
			"servedBy":0,
			"strokes":[],
			"winType":"",
			"errorType":"",
			"wonBy":0
		};//update servedByPlayerID, pointWinnerIDPlayerID and exactly one of forcedError, unforcedError and winner
		$scope.data=[];
		$scope.displayRally=[];//{"from":,"to":,"condition":}
		$scope.gameEnd="";
		$scope.items=['H','G','F','E','D','C','B','A'];
		$scope.currentClick={element:"",coordinates:[-1,-1],mouseButton:""};
		$scope.prevClick={element:"",coordinates:[-2,-2],mouseButton:""};
		$scope.currentState="initial";
		$scope.prevState="";
		$scope.serviceSquare="";
		$scope.currentSide="";
		$scope.pushInd=1;//pushIndicator
		$scope.point=$scope.point;
		$scope.value={	forcedError:"garbage",
				unforcedError:"garbage",
				winner:"garbage"
			      };
		$scope.winnerPoint="";
		$scope.visible={uploadFileBox:"none"};
		$scope.disable={square:[
				      [true,false,false,false,false,true],/*row H*/
				      [true,false,false,false,false,true],/*row G*/
				      [true,false,false,false,false,true],/*row F*/
				      [true,true,true,true,true,true],/*row E*/
				      [true,true,true,true,true,true],/*row D*/
				      [true,false,false,false,false,true],/*row C*/
				      [true,false,false,false,false,true],/*row B*/
				      [true,false,false,false,false,true]/*row A*/
				      ],
				net:true,
				out:[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true],
				winnerPoint:true,
				newPoint:true,
				resetPoint:true,
				newGame:true,
				winnerGame:true,
				endMatch:true,
				forcedError:true,
				unforcedError:true,
				winner:true,
				middleClickSquare:[
					      [true,true,true,true,true,true],/*row H*/
					      [true,true,true,true,true,true],/*row G*/
					      [true,true,true,true,true,true],/*row F*/
					      [true,true,true,true,true,true],/*row E*/
					      [true,true,true,true,true,true],/*row D*/
					      [true,true,true,true,true,true],/*row C*/
					      [true,true,true,true,true,true],/*row B*/
					      [true,true,true,true,true,true]/*row A*/
					    		],
				leftClickSquare:[
						[true,false,false,false,false,true],
						[true,false,false,false,false,true],
						[true,false,false,false,false,true],
						[true,true,true,true,true,true],
						[true,true,true,true,true,true],
						[true,false,false,false,false,true],
						[true,false,false,false,false,true],
						[true,false,false,false,false,true]
						]
				};
		$scope.colour1={P1:"pink",
				P2:"orange",
				square:[["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"],["BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood","BurlyWood"]],
					net:"white",
				out:["white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white"],
				forcedError:"gray",
				unforcedError:"gray",
				winner:"gray",
				store:""
				};
		$scope.colour2={square:[["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"],["green","green","green","green","green","green"]],
				net:"gray",
				out:["gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray","gray"],
				service:"blue"
				};
		$scope.colour3={square:[["red","red","red","red","red","gray"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"],["red","red","red","red","red","red"]]
				};
		$scope.tmp="";
	};
$scope.saveState=function()
{
		//rally
		//game
		//$scope.data
		//$scope.displayRally
		//$scope.gameEnd
		//$scope.items
		//$scope.currentClick
		//$scope.prevClick
		//$scope.currentState
		//$scope.prevState
		//$scope.serviceSquare
		//$scope.currentSide
		//$scope.pushInd
		//$scope.point
		//$scope.value
		//$scope.winnerPoint
		//$scope.visible
		//$scope.disable
		//$scope.colour1
		//$scope.colour2
		//$scope.colour3
		//$scope.tmp
var state={"rally":rally,
"game":game,
"data":$scope.data,
"displayRally":$scope.displayRally,
"gameEnd":$scope.gameEnd,
"items":$scope.items,
"currentClick":$scope.currentClick,
"prevClick":$scope.prevClick,
"currentState":$scope.currentState,
"prevState":$scope.prevState,
"serviceSquare":$scope.serviceSquare,
"currentSide":$scope.currentSide,
"pushInd":$scope.pushInd,
"point":$scope.point,
"value":$scope.value,
"winnerPoint":$scope.winnerPoint,
"visible":$scope.visible,
"disable":$scope.disable,
"colour1":$scope.colour1,
"colour2":$scope.colour2,
"colour3":$scope.colour3,
"tmp":$scope.tmp
};
$scope.downloadFileName="StateFile.txt";
(function () 
			{
							var textFile = null,
							makeTextFile = function (text) 
							{
											var data = new Blob([text], {type: 'text/plain'});
											// If we are replacing a previously generated file we need to
											// manually revoke the object URL to avoid memory leaks.
											if (textFile !== null) 
											{
												window.URL.revokeObjectURL(textFile);
											}
											textFile = window.URL.createObjectURL(data);
											return textFile;
							};
							var link = document.getElementById('downloadlink');
							link.href = makeTextFile(JSON.stringify(state));
							link.style.display = 'block';
			 })();
};
$scope.loadState=function()
{
	if(angular.equals($scope.visible.uploadFileBox,"none"))
	{
		$scope.visible.uploadFileBox="block";
	}
	else
	{
		$scope.visible.uploadFileBox="none";
	}
};
$scope.applyLoadState=function(objLoad)
{
	rally=objLoad.rally;
	game=objLoad.game;
	$scope.data=objLoad.data;
	$scope.displayRally=objLoad.displayRally;
	$scope.gameEnd=objLoad.gameEnd;
	$scope.items=objLoad.items;
	$scope.currentClick=objLoad.currentClick;
	$scope.prevClick=objLoad.prevClick;
	$scope.currentState=objLoad.currentState;
	$scope.prevState=objLoad.prevState;
	$scope.serviceSquare=objLoad.serviceSquare;
	$scope.currentSide=objLoad.currentSide;
	$scope.pushInd=objLoad.pushInd;
	$scope.point=objLoad.point;
	$scope.value=objLoad.value;
	$scope.winnerPoint=objLoad.winnerPoint;
	$scope.visible=objLoad.visible;
	$scope.disable=objLoad.disable;
	$scope.colour1=objLoad.colour1;
	$scope.colour2=objLoad.colour2;
	$scope.colour3=objLoad.colour3;
	$scope.tmp=objLoad.tmp;
};
});
function myFunction(event,area,details)//event is the mouse click, area is which part of UI was clicked, details is auxilary to the area
	{
		var scope = angular.element(document.getElementById("myCtrlID")).scope();
		switch(event.button)
		{			
			case 0://leftClick
				switch(area)
				{	case "square":scope.$apply(function (){scope.leftClickSquare(details);});
						break;
					case "unforcedError":scope.$apply(function (){scope.leftClickunforcedError();});
						break;
					case "forcedError":scope.$apply(function (){scope.leftClickforcedError();});
						break;
					case "winner":scope.$apply(function (){scope.leftClickwinner();});
						break;
					case "resetPoint":scope.$apply(function (){scope.leftClickresetPoint();});
						break;
					case "winnerPoint":scope.$apply(function (){scope.leftClickwinnerPoint();});
						break;
					case "newPoint":scope.$apply(function (){scope.leftClicknewPoint();});
						break;
					case "winnerGame":scope.$apply(function (){scope.leftClickwinnerGame();});
						break;
					case "newGame":scope.$apply(function (){scope.leftClicknewGame();});
						break;
					case "endMatch":scope.$apply(function (){scope.leftClickendMatch()});
					break;		
					default:
				}
				break;
			case 1://middleClick
				switch(area)
				{				
					case "net":scope.$apply(function (){scope.middleClickNet();});
					break;
					case "out":scope.$apply(function (){scope.middleClickOut(details[0]);});
					break;
					case "square":scope.$apply(function (){scope.middleClickSquare(details);});
					break;
					default:
				}
			default:
		}
    }
function OnFileLoad() 
{
		var scope = angular.element(document.getElementById("myCtrlID")).scope();
		var file = document.getElementById("uploadFileBox").files[0];
		var textType = /text.*/;
		//var fileDisplayArea = document.getElementById("FileContent");
		if (file.type.match(textType)) {
				var reader = new FileReader();

				reader.onload = function (e) {
						//fileDisplayArea.innerText = reader.result;
						scope.$apply(function (){scope.applyLoadState(JSON.parse(reader.result));});
				}

				reader.readAsText(file);
		}
}
</script>

</body>
</html>
